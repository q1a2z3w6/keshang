<!doctype html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>设计</title>
    <link rel="stylesheet" href="../lib/layui/css/layui.css">
    <link rel="stylesheet" href="../css/home.css">
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/add.css">
    <link rel="stylesheet" href="../css/main.css">
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
    <div class="header">
        <div class="logo">
              <img src="../images/logo.jpg" alt="">  
        </div>  
        <div class="banner">
            <ul class="layui-nav layui-bg-cyan">
            <li class="layui-nav-item">
                <a href="javascript:;">供应商管理</a>
                <dl class="layui-nav-child">
                <dd><a href="home.html">供应商维护</a></dd>
                <dd><a href="">供应商审核</a></dd>
                
                </dl>
            </li>
            <li class="layui-nav-item">
                <a href="javascript:;">系统设置</a>
                <dl class="layui-nav-child">
                <dd><a href="">供应商类别</a></dd>
                <dd><a href="">发布消息</a></dd>
                <dd><a href="">发布招商公告</a></dd>
                </dl>
            </li>
            <li class="layui-nav-item">
                <a href="javascript:;">个人中心</a>
                <dl class="layui-nav-child">
                <dd><a href="">基本信息</a></dd>
                <dd><a href="">密码修改</a></dd>
               
                </dl>
            </li>
            </ul>       
        </div>
        <div>
        <div class="crumb">
            
        </div>
        </div>
    </div>
    <div class="layui-container mainpage">
   
          <div class="table_type1">
              <h2 class="h2tit">供应商评估表（设计）</h2>
              <table border="0" cellspacing="0" cellpadding="0">
                <tr>
                  <td colspan="2">
                    项目名称
                  </td>
                  <td colspan="3">
                    <input type="text" class="sendwords">
                  </td>
                  <td>
                    类别
                  </td>
                  <td colspan="2">
                    施工总承包
                  </td>
                </tr>
                <tr>
                  <td colspan="2">
                    供应商名称
                  </td>
                  <td colspan="3">
                    <input type="text" class="sendwords">
                  </td>
                  <td>
                    评估时间
                  </td>
                  <td colspan="2">
                    
                  </td>
                </tr>
                <tr>
                  <td>
                    阶段
                  </td>
                  <td>
                    评估项目
                  </td>
                  <td>
                    评估指标
                  </td>
                  <td>
                    权重
                  </td>
                  <td>
                    3分标准(合格）
                  </td>
                  <td>
                    评分
                  </td>
                  <td>
                    得分
                  </td>
                  <td>
                    评估人
                  </td>
                </tr>
                <tr>
                  <td rowspan="15">
                    工程管理评估
                  </td>
                  <td rowspan="5">
                    管理
                  </td>
                  <td>
                    甲供材料接受、保管及使用
                  </td>
                  <td>
                    <div class="num">2%</div>
                  </td>
                  <td>
                    按要求接收、保管甲供材料，有合理的保护措施，合理使用甲供材料，无铺张浪费。
                  </td>
                  <td>
                    <input type="number" class="words">
                  </td>
                  <td>
                    <div class="result"></div>
                  </td>
                  <td rowspan="15">

                  </td>
                </tr>
                <tr>
                  <td>
                    分包单位管理
                  </td>
                  <td>
                    <div class="num">2%</div>
                  </td>
                  <td>
                    对甲分包单位进行统一管理，在制度、现场、施工、安全等方面统一执行。
                  </td>
                  <td>
                    <input type="number" class="words">
                  </td>
                  <td>
                    <div class="result"></div>
                  </td>
                </tr>
                <tr>
                  <td>
                    资源投入是否满足要求
                  </td>
                  <td>
                    <div class="num">3%</div>
                  </td>
                  <td>
                    现场管理人员、设备及工种、工人数量配置合理。
                  </td>
                  <td>
                    <input type="number" class="words">
                  </td>
                  <td>
                    <div class="result"></div>
                  </td>
                </tr>
                <tr>
                  <td>
                    施工组织设计和专项施工方案编制及实施是否到位
                  </td>
                  <td>
                    <div class="num">6%</div>
                  </td>
                  <td>
                    能按要求完成施工组织设计和专项施工方案编制，最终按照方案落实。
                  </td>
                  <td>
                    <input type="number" class="words">
                  </td>
                  <td>
                    <div class="result"></div>
                  </td>
                </tr>
                <tr>
                  <td>
                    为最终客户服务
                  </td>
                  <td>
                    <div class="num">2%</div>
                  </td>
                  <td>
                    能否站在最终客户角度对图纸、施工做法和产品功能提出改进建议，能对新技术、新设备、新工艺、新材料进行研究和应用。
                  </td>
                  <td>
                    <input type="number" class="words">
                  </td>
                  <td>
                    <div class="result"></div>
                  </td>
                </tr>
                <tr>
                  <td rowspan="3">
                    质量
                  </td>
                  <td>
                    质量保证体系是否正常运转
                  </td>
                  <td>
                    <div class="num">2%</div>
                  </td>
                  <td>
                    有质量保证体系，体系基本保持正常运转。
                  </td>
                  <td>
                    <input type="number" class="words">
                  </td>
                  <td>
                    <div class="result"></div>
                  </td>
                </tr>
                <tr>
                  <td>
                    工程实体质量是否符合要求
                  </td>
                  <td>
                    <div class="num">6%</div>
                  </td>
                  <td>
                    工程实体质量达到合同要求。
                  </td>
                  <td>
                    <input type="number" class="words">
                  </td>
                  <td>
                    <div class="result"></div>
                  </td>
                </tr>
                <tr>
                  <td>
                    是否坚持样板先行制度
                  </td>
                  <td>
                    <div class="num">2%</div>
                  </td>
                  <td>
                    能按要求对重要工序在正式开始施工前先做施工样板，获得批准后方进行大面积施工。
                  </td>
                  <td>
                    <input type="number" class="words">
                  </td>
                  <td>
                    <div class="result"></div>
                  </td>
                </tr>
                <tr>
                  <td>
                    进度
                  </td>
                  <td>
                    进度管理是否到位
                  </td>
                  <td>
                    <div class="num">8%</div>
                  </td>
                  <td>
                    能按要求编制/调整进度计划，能基本保证工期
                  </td>
                  <td>
                    <input type="number" class="words">
                  </td>
                  <td>
                    <div class="result"></div>
                  </td>
                </tr>
                <tr>
                  <td>
                    安全施工
                  </td>
                  <td>
                    安全、防火、现场管理等是否到位
                  </td>
                  <td>
                    <div class="num">4%</div>
                  </td>
                  <td>
                    能达到安全文明工地要求。
                  </td>
                  <td>
                    <input type="number" class="words">
                  </td>
                  <td>
                    <div class="result"></div>
                  </td>                  
                </tr>
                <tr>
                  <td rowspan="2">
                    配合
                  </td>
                  <td>
                    对监理及甲方提出的合理技术/管理要求、整改通知和设计变更的执行情况，现场签证及补充预算管理；处理扰民及付款引起的相关事项
                  </td>
                  <td>
                    <div class="num">8%</div>
                  </td>
                  <td>
                    就大部分指令而言，基本可以得到落实；现场签证和补充预算符合现场实际情况，申报及时；有无资金问题影响到工程或引起劳务纠纷，是否有效处理扰民、民扰问题。
                  </td>
                  <td>
                    <input type="number" class="words">
                  </td>
                  <td>
                    <div class="result"></div>
                  </td>
                </tr>
                <tr>
                  <td>
                    对分包单位的配合
                  </td>
                  <td>
                    <div class="num">5%</div>
                  </td>
                  <td>
                    给予分包单位合理的资源配合，无任何无理要求。
                  </td>
                  <td>
                    <input type="number" class="words">
                  </td>
                  <td>
                    <div class="result"></div>
                  </td>
                </tr>
                <tr>
                  <td rowspan="2">
                    保修
                  </td>
                  <td>
                    工程竣工后质量整改及问题
                  </td>
                  <td>
                    <div class="num">2%</div>
                  </td>
                  <td>
                    工程验收后问题较少，整改较少。
                  </td>
                  <td>
                    <input type="number" class="words">
                  </td>
                  <td>
                    <div class="result"></div>
                  </td>
                </tr>
                <tr>
                  <td>
                    保修速度与质量
                  </td>
                  <td>
                    <div class="num">2%</div>
                  </td>
                  <td>
                    后期保修及时，整改结果较好。
                  </td>
                  <td>
                    <input type="number" class="words">
                  </td>
                  <td>
                    <div class="result"></div>
                  </td>
                </tr>
                <tr>
                  <td>
                    违约行为
                  </td>
                  <td>
                    全部按照合同内容进行施工
                  </td>
                  <td>
                    <div class="num">6%</div>
                  </td>
                  <td>
                    全部按照合同内容进行施工，无违约行为。
                  </td>
                  <td>
                    <input type="number" class="words">
                  </td>
                  <td>
                    <div class="result"></div>
                  </td>
                </tr>
                <tr>
                  <td rowspan="4">
                    成本部合约阶段评估
                  </td>
                  <td>
                    合同签定
                  </td>
                  <td>
                    按投标文件执行
                  </td>
                  <td>
                    <div class="num">5%</div>
                  </td>
                  <td>
                    能按投标文件技术条款及商务条件，及时签定。
                  </td>
                  <td>
                    <input type="number" class="words">
                  </td>
                  <td>
                    <div class="result"></div>
                  </td>
                  <td rowspan="4">
                    
                  </td>
                </tr>
                <tr>
                  <td>
                    合同履行
                  </td>
                  <td>
                    <div>能严格履行合同条款</div>
                  </td>
                  <td>
                    <div class="num">10%</div>
                  </td>
                  <td>
                    无违约现象
                  </td>
                  <td>
                    <input type="number" class="words">
                  </td>
                  <td>
                    <div class="result"></div>
                  </td>
                </tr>
                <tr>
                  <td>
                    签证管理
                  </td>
                  <td>
                    <div>签证及时准确</div>
                  </td>
                  <td>
                    <div class="num">7%</div>
                  </td>
                  <td>
                    申报及时，签证符合现场情况，准确明晰。
                  </td>
                  <td>
                    <input type="number" class="words">
                  </td>
                  <td>
                    <div class="result"></div>
                  </td>
                </tr>
                <tr>
                  <td>
                    预结算
                  </td>
                  <td>
                    <div>预结算配合</div>
                  </td>
                  <td>
                    <div class="num">8%</div>
                  </td>
                  <td>
                    预结算文件无虚假、高估现象，上报及时。
                  </td>
                  <td>
                    <input type="number" class="words">
                  </td>
                  <td>
                    <div class="result"></div>
                  </td>
                </tr>
                <tr>
                  <td>
                    成本部招采阶段评估
                  </td>
                  <td>
                    <div>诚信评估</div>
                  </td>
                  <td>
                    整体过程无违约，诚信履行合同。
                  </td>
                  <td>
                    <div class="num">10%</div>
                  </td>
                  <td>
                    无违约，无拒绝履行，无违法乱纪，正常履行合同。
                  </td>
                  <td>
                    <input type="number" class="words">
                  </td>
                  <td>
                    <div class="result"></div>
                  </td>
                </tr>
                <tr>
                  <td colspan="3">
                    评估总得分
                  </td>
                  <td>
                    100%
                  </td>
                  <td></td>
                  <td></td>
                  <td id="all"></td>
                  <td></td>
                </tr>
                <tr>
                  <td rowspan="3">
                    总体评价
                  </td>
                  <td>
                    优点
                  </td>
                  <td colspan="5">
                    
                  </td>
                  <td>
                    
                  </td>
                </tr>
                <tr>
                  <td>
                    缺点
                  </td>
                  <td colspan="5">
                    
                  </td>
                  <td></td>
                </tr>
                <tr>
                  <td>
                    总评估
                  </td>
                  <td colspan="5">
                    
                  </td>
                  <td></td>
                </tr>
                

              </table>
              <div class="desc">
                <h3 class="h3tit">
                  说明：
                </h3>
                <div class="words">
                  <p>
                   1、评分采用5分制：5分＝超出预期(90分以上），4分＝首选的（80－90分（含）），3分＝可接受的（65－80分），2分＝可限制条件使用(56分－65分），1分＝不可接受的(55分（含）以下)。
                  </p>
                  <p>
                    2、由相关部门的人员参与评估打分，每个评估人员单独打分，只评估由本部门负责的指标。
                  </p>
                  <p>
                    3、总分=∑（权重*得分）/5*100。
                  </p>
                  <p>
                    4、总评估采用“优（>90分）、良（75-90分（含））、中（55-75分）、差（<55分（含））”四级标准评分，根据工程、合约、招采三个部门综合评分确定；诚信评估不足3分的单位均视为中等以下。
                  </p>
                  <p>
                    
                  </p>
                </div>
                <p>
                    <a href="javascript:;" class="cot" onclick="window.close()">保存</a>
                </p>
              </div>
            </div>
    </div>
    <script src="../lib/layui/layui.all.js"></script>
    <script>

        var allhtml = $('#tabledata');
        layui.use('laypage', function(){
            var laypage = layui.laypage;
            //执行一个laypage实例
            laypage.render({
                limit: 20, // 每页条数
                elem: 'pages', //注意，这里的 test1 是 ID，不用加 # 号,
                count: 100 //数据总数，从服务端得到
            });
        });
        // 保存提交添加供应商信息
        function getmsg(type) {
            var msg = localStorage.getItem('datalist');
            var data ={
                name: $('#name').val(), // 用户名称
                type: $('#type').val(), // 供方分类
                diode: $('#diode').val(), //主营资质
                other: $('#other').val(),// 其他资质
                brand: $('#brand').val(),// 品牌
                sales: $('#sales').val(), // 销售类别
                money: $('#money').val(), // 注册资金
                legal: $('#legal').val(), // 法人
                business: $('#business').val(), //主营业务
                area: $('#area').val(), // 营业区域
                identify: $('#identify').val(), //纳税人识别号
                linkman: $('#linkman').val(), // 联系人
                phone: $('#phone').val(), // 联系电话
                email: $('#email').val() // 邮箱
            };
            for(var i in data) {
                if(data[i].trim().length == 0){
                    layer.msg('请添加完所有的信息');
                    return
                }
            }
            if(type != undefined){
                msg = JSON.parse(msg);
                msg[type] = data;
                localStorage.setItem('datalist', JSON.stringify(msg));
                layer.msg('修改成功');
                layer.closeAll(); // 关闭layui的弹窗
            }else {
                if(msg == null){
                    var datalist = [];
                    datalist.push(data);
                    localStorage.setItem('datalist', JSON.stringify(datalist));
                    layer.msg('添加成功');
                    layer.closeAll(); // 关闭layui的弹窗
                }else {
                    msg = JSON.parse(msg);
                    msg.unshift(data);
                    localStorage.setItem('datalist',JSON.stringify(msg));
                    layer.msg('添加成功');
                    layer.closeAll(); // 关闭layui的弹窗
                }
            }
            getdatas();
            layer.closeAll(); // 关闭layui的弹窗
        }
        getdatas();
        // 在本地获取所有的商家信息
        function getdatas() {
            var data = JSON.parse(localStorage.getItem('datalist'));
            if(data == null || data.length == 0){
                $('#nodata').html('没有数据');
                data = []
            }
            var html = '';
            data.map(function(item,idx){
                html+= '<tr>' +
                    '<td>'+ parseInt(idx+ 1) +'</td>' +
                    '<td onclick="chousedata(event,'+ idx +')" style="cursor:pointer;">'+ item.name +'</td>' +
                    '<td>'+ item.type +'</td>' +
                    '<td>'+ item.diode +'</td>' +
                    '<td>'+ item.sales +'</td>' +
                    '<td>'+ item.business+'</td>' +
                    '</tr>'
            });
            $('#tabledata').html(html);
        }
//        查询。修改
        function chousedata(event,idx) {
            event.stopPropagation(); // 阻止时间冒泡
            let addhtml = '<div style="padding-top: 20px;"><form class="layui-form"> <!-- 提示：如果你不想用form，你可以换成div等任何一个普通元素 -->' +
                '        <div class="clearfix listitem">' +
                '            <div class="fl">' +
                '                <p>用户名称</p>' +
                '                <div><input type="text" name="" class="layui-input" id="name"></div>' +
                '            </div>' +
                '            <div class="fr">' +
                '                <p>供方分类</p>' +
                '                <div><input type="text" name="" class="layui-input" id="type"></div>' +
                '            </div>' +
                '        </div>' +
                '        <div class="clearfix listitem">' +
                '            <div class="fl">' +
                '                <p>主营资质</p>' +
                '                <div><input type="text" name="" class="layui-input" id="diode"></div>' +
                '            </div>' +
                '            <div class="fr">' +
                '                <p>其他资质</p>' +
                '                <div><input type="text" name="" class="layui-input" id="other"></div>' +
                '            </div>' +
                '        </div>' +
                '        <div class="clearfix listitem">' +
                '            <div class="fl">' +
                '                <p>品牌</p>' +
                '                <div><input type="text" name="" class="layui-input" id="brand"></div>' +
                '            </div>' +
                '            <div class="fr">' +
                '                <p>销售类别</p>' +
                '                <div><input type="text" name="" class="layui-input" id="sales"></div>' +
                '            </div>' +
                '        </div>' +
                '        <div class="clearfix listitem">' +
                '            <div class="fl">' +
                '                <p>注册资金</p>' +
                '                <div><input type="number" name="" class="layui-input" id="money"></div>' +
                '            </div>' +
                '            <div class="fr">' +
                '                <p>法人</p>' +
                '                <div><input type="text" name="" class="layui-input" id="legal"></div>' +
                '            </div>' +
                '        </div>' +
                '        <div class="clearfix listitem">' +
                '            <div>' +
                '                <p>主营业务</p>' +
                '                <div><input type="text" name="" class="layui-input" id="business"></div>' +
                '            </div>' +
                '        </div>' +
                '        <div class="clearfix listitem">' +
                '            <div class="fl">' +
                '                <p>营业区域</p>' +
                '                <div><input type="text" name="" class="layui-input" id="area"></div>' +
                '            </div>' +
                '            <div class="fr">' +
                '                <p>纳税人识别号</p>' +
                '                <div><input type="text" name="" class="layui-input" id="identify"></div>' +
                '            </div>' +
                '        </div>' +
                '        <div class="clearfix threelist">' +
                '            <div class="fl">' +
                '                <p>联系人</p>' +
                '                <div><input type="text" name="" class="layui-input" id="linkman"></div>' +
                '            </div>' +
                '            <div class="fl center">' +
                '                <p>联系电话</p>' +
                '                <div><input type="text" name="" class="layui-input" id="phone"></div>' +
                '            </div>' +
                '            <div class="fr">' +
                '                <p>邮箱</p>' +
                '                <div><input type="text" name="" class="layui-input" id="email"></div>' +
                '            </div>' +
                '        </div>' +
                '        <div class="clearfix listitem">' +
                '            <div class="fl">' +
                '                <p>附件清单</p>' +
                '                <div><button type="button" class="layui-btn" id="upfile1"><i class="layui-icon">&#xe67c;</i>上传文件</button></div>' +
                '            </div>' +
                '            <div class="fr">' +
                '                <p>附件清单</p>' +
                '                <div><button type="button" class="layui-btn" id="upfile2"><i class="layui-icon">&#xe67c;</i>上传文件</button></div>' +
                '            </div>' +
                '        </div>' +
                '        <div class="textcenter">' +
                '            <button class="layui-btn" type="button" onclick="getmsg('+ idx +')">保存</button>' +
                '            <button class="layui-btn canclemodel" type="button"  onclick="cancleall()">取消</button>' +
                '        </div>' +
                '    </form></div>';
            $('.canclemodel').click(function () {
                layer.closeAll()
            });
            var datalist = JSON.parse(localStorage.getItem('datalist'));
            var nowdata = datalist[idx];
            layer.open({
                type : 1,
                title : '查看并修改供应商信息',
                offset:'t',
                maxmin : true,
//                offset: '100px',
                area : ['85%', '100%'],
                content : addhtml// iframe的url
            });


                $('#name').val(nowdata.name); // 用户名称
                $('#type').val(nowdata.type); // 供方分类
                $('#diode').val(nowdata.diode), //主营资质
                $('#other').val(nowdata.other),// 其他资质
                $('#brand').val(nowdata.brand),// 品牌
                $('#sales').val(nowdata.sales), // 销售类别
                $('#money').val(nowdata.money), // 注册资金
                $('#legal').val(nowdata.legal), // 法人
                $('#business').val(nowdata.business), //主营业务
                $('#area').val(nowdata.area), // 营业区域
                $('#identify').val(nowdata.identify), //纳税人识别号
                $('#linkman').val(nowdata.linkman), // 联系人
                $('#phone').val(nowdata.phone), // 联系电话
                $('#email').val(nowdata.email) // 邮箱
        }
        // 打开添加供应商信息
        function openadd(){
            let addhtml = '<div style="padding-top: 20px;"><form class="layui-form"> <!-- 提示：如果你不想用form，你可以换成div等任何一个普通元素 -->' +
                '        <div class="clearfix listitem">' +
                '            <div class="fl">' +
                '                <p>用户名称</p>' +
                '                <div><input type="text" name="" class="layui-input" id="name"></div>' +
                '            </div>' +
                '            <div class="fr">' +
                '                <p>供方分类</p>' +
                '                <div><input type="text" name="" class="layui-input" id="type"></div>' +
                '            </div>' +
                '        </div>' +
                '        <div class="clearfix listitem">' +
                '            <div class="fl">' +
                '                <p>主营资质</p>' +
                '                <div><input type="text" name="" class="layui-input" id="diode"></div>' +
                '            </div>' +
                '            <div class="fr">' +
                '                <p>其他资质</p>' +
                '                <div><input type="text" name="" class="layui-input" id="other"></div>' +
                '            </div>' +
                '        </div>' +
                '        <div class="clearfix listitem">' +
                '            <div class="fl">' +
                '                <p>品牌</p>' +
                '                <div><input type="text" name="" class="layui-input" id="brand"></div>' +
                '            </div>' +
                '            <div class="fr">' +
                '                <p>销售类别</p>' +
                '                <div><input type="text" name="" class="layui-input" id="sales"></div>' +
                '            </div>' +
                '        </div>' +
                '        <div class="clearfix listitem">' +
                '            <div class="fl">' +
                '                <p>注册资金</p>' +
                '                <div><input type="number" name="" class="layui-input" id="money"></div>' +
                '            </div>' +
                '            <div class="fr">' +
                '                <p>法人</p>' +
                '                <div><input type="text" name="" class="layui-input" id="legal"></div>' +
                '            </div>' +
                '        </div>' +
                '        <div class="clearfix listitem">' +
                '            <div>' +
                '                <p>主营业务</p>' +
                '                <div><input type="text" name="" class="layui-input" id="business"></div>' +
                '            </div>' +
                '        </div>' +
                '        <div class="clearfix listitem">' +
                '            <div class="fl">' +
                '                <p>营业区域</p>' +
                '                <div><input type="text" name="" class="layui-input" id="area"></div>' +
                '            </div>' +
                '            <div class="fr">' +
                '                <p>纳税人识别号</p>' +
                '                <div><input type="text" name="" class="layui-input" id="identify"></div>' +
                '            </div>' +
                '        </div>' +
                '        <div class="clearfix threelist">' +
                '            <div class="fl">' +
                '                <p>联系人</p>' +
                '                <div><input type="text" name="" class="layui-input" id="linkman"></div>' +
                '            </div>' +
                '            <div class="fl center">' +
                '                <p>联系电话</p>' +
                '                <div><input type="text" name="" class="layui-input" id="phone"></div>' +
                '            </div>' +
                '            <div class="fr">' +
                '                <p>邮箱</p>' +
                '                <div><input type="text" name="" class="layui-input" id="email"></div>' +
                '            </div>' +
                '        </div>' +
                '        <div class="clearfix listitem">' +
                '            <div class="fl">' +
                '                <p>附件清单</p>' +
                '                <div><button type="button" class="layui-btn" id="upfile1"><i class="layui-icon">&#xe67c;</i>上传文件</button></div>' +
                '            </div>' +
                '            <div class="fr">' +
                '                <p>附件清单</p>' +
                '                <div><button type="button" class="layui-btn" id="upfile2"><i class="layui-icon">&#xe67c;</i>上传文件</button></div>' +
                '            </div>' +
                '        </div>' +
                '        <div class="textcenter">' +
                '            <button class="layui-btn" type="button" onclick="getmsg()">保存</button>' +
                '            <button class="layui-btn canclemodel" type="button" onclick="cancleall()">取消</button>' +
                '        </div>' +
                '    </form></div>';
            layer.open({
                type: 1,
                title: ['新增供应商信息', 'font-size:16px;'],
                area: ['80%', '100%'],
                fixed: false, //不固定
                offset: 't',
                maxmin: true,
                content: addhtml
            });
        }
        function cancleall() {
            layer.closeAll()
        }
//        查询按钮
        function searchbox() {
             let addserarchThml = '<div class="clearfix main">'+
                '<div class="fl nav">'+
                 '</div>'+
                 '<div class="fr">'+
                 '<div class="top clearfix">'+
                 '<span class="fl title">精品材料设备类 </span><i class="layui-icon-right layui-icon fl"></i>'+
                 '<span class="fl">'+
                 '<input type="text" name="title" id="searchname" placeholder="请输入搜索内容" autocomplete="off" class="layui-input serchipt">'+
                 '</span>'+
                 '<button type="button" class="layui-btn layui-btn" style="height: 30px;line-height:30px;position: relative;top: -1px;" id="closemask">查询</button>'+
                 '</div>'+
                 '<div class="clearfix type2"><span class="fl typespan">分类2:</span>' +
                 '<div class="fl">' +
                 '<select id="firsttype">' +
                 '<option value="前期类">前期类</option>' +
                 '<option value="设计类">设计类</option>' +
                 '<option value="咨询类">咨询类</option>' +
                 '<option value="土建及结构类">土建及结构类</option>' +
                 '<option value="机电安装类">机电安装类</option>' +
                 '<option value="建设材料设备类">建设材料设备类</option>' +
                 '<option value="市政建材类">市政建材类</option>' +
                 '</select>' +
                 '</div>' +
                 '</div>'+
                 '<div class="clearfix type2"><span class="fl typespan">分类1:</span>' +
                 '<div class="fl">' +
                 '<select id="twotype">' +
                 '<option value="百度">百度</option>' +
                 '<option value="天猫">天猫</option>' +
                 '<option value="京东">京东</option>' +
                 '</select>' +
                 '</div>' +
                 '</div>'+
                 '<div class="clearfix " style="padding: 5px 20px;">' +
                 '<span class="fl typespan">名称：</span>' +
                 '<div class="fl"><input type="text" id="nametype"></div>' +
                 '</div>'+
                 '<div class="clearfix" style="padding: 5px 20px;">' +
                 '<span class="fl typespan">品牌：</span>' +
                 '<div class="fl"><input type="text" id="nametype"></div>' +
                 '</div>'+
                 '<div class="clearfix" style="padding: 5px 20px;">' +
                 '<span class="fl typespan">联系人：</span>' +
                 '<div class="fl"><input type="text" id="nametype"></div>' +
                 '</div>'+
                '<div class="clearfix" style="padding: 5px 20px;">' +
                '<span class="fl typespan">电话：</span>' +
                '<div class="fl"><input type="text" id="nametype"></div>' +
                '</div>'+
                 '</div>'+
                 '</div>'
            layer.open({
                type: 1,
                title: ['查询', 'font-size:16px;'],
                area: ['80%', '85%'],
                fixed: false, //不固定
                maxmin: true,
                content: addserarchThml
            });
            $('#closemask').click(function () {
                search()
            });
            function getVal(controlID, controltype) {
                var objValue = '';
                switch (controltype) {
                    case 'text':  //文本输入框
                        objValue = $.trim($('#' + controlID + '').val());  //取值除去所有的空格
                        break;
                    case 'radio': //单选框
                        objValue = $("input[name='" + controlID + "']:checked").val();
                        break;
                    case 'select': //下拉列表
                        objValue = $("#" + controlID + "").val();
                        break;
                    case 'checkbox': //复选框
                        $("input[name='" + controlID + "']:checked").each(function () {
                            objValue += $(this).val() + ",";
                        });
                        break;
                    default:
                        break;
                }
                return objValue;
            }
            $('#firsttype').change(function () {
                var world = getVal('firsttype','select');
                $('.top .title').html(world)
            });
            $('#twotype').change(function () {
                var world = getVal('twotype','select');
                $('#searchname').val(world)
            })
            // 更多选项展开收齐
            $('.addmore').click(function () {
                $('.moredata').slideToggle();
            });
            function search(){
                var name = $('#searchname').val();
                if(name.trim().length == 0){
                    getdata();
                }else {
                    var data = JSON.parse(localStorage.getItem('datalist'));
                    var hasdata = [];
                        data.map(function (item,idx) {
                            if(item.name == name){
                                hasdata.push(item);
                            }
                        });
                    getdata(hasdata)
                }
            };
            // 在本地获取所有的商家信息
            function getdata(data) {
                if(!data){
                    data = JSON.parse(localStorage.getItem('datalist'));
                }
                if(data == null || data.length == 0){
                    $('#nodata').html('没有数据');
                    data = []
                }
                var html = '';
                data.map(function(item,idx){
                    html+= '<tr>' +
                        '<td>'+ parseInt(idx+ 1) +'</td>' +
                        '<td onclick="chousedata(event,'+ idx +')" style="cursor:pointer;">'+ item.name +'</td>' +
                        '<td>'+ item.type +'</td>' +
                        '<td>'+ item.diode +'</td>' +
                        '<td>'+ item.sales +'</td>' +
                        '<td>'+ item.business+'</td>' +
                        '</tr>'
                });
                allhtml.html(html);
                layer.closeAll()
            }

            // 跳转到表格信息
            function suppliermsg(obj){
                // console.log($(obj).name)
                parent.$("#nowpage").attr("src",'pages/supplierinformation.html')
            }
            $('.nav li').click(function () {
                $(this).addClass('active').siblings().removeClass('active');
                var word = $(this).text();
                $('.title').html(word)
            });
            // 是否有资质
            $('.zizhi span,.friend span').click(function () {
                $(this).addClass('hasd').siblings().removeClass('hasd');
            });
            // 点击左侧分页
            $('.page-left').click(function () {
                var num = parseInt($('.pagenum').html());
                var numall = parseInt($('.pageAll').html());
                if(num >= 2){
                    num--;
                }
                if(num > 1 && num < numall){
                    $('.page-left').removeClass('page-end');
                    $('.page-right').removeClass('page-end')
                }
                if(num == 1){
                    $('.page-left').addClass('page-end')
                }
                $('.pagenum').html(num)
            });
            // 点击右侧分页
            $('.page-right').click(function () {
                var num = parseInt($('.pagenum').html());
                var numall = parseInt($('.pageAll').html());
                if(num <= (numall - 1)){
                    num++;
                }
                if(num > 1 && num < numall){
                    $('.page-left').removeClass('page-end');
                    $('.page-right').removeClass('page-end')
                }
                if(num == numall){
                    $('.page-right').addClass('page-end')
                }
                $(".pagenum").html(num)
            });
            $('.condition span').click(function () {
                let textval = $(this).text();
                $('.serchipt').val(textval);
            });
        }
        // 跳转到表格信息
        function suppliermsg(obj){
            // console.log($(obj).name)
            parent.$("#nowpage").attr("src",'pages/supplierinformation.html')
        }
    </script>

<script>
  function sum(arr) {
    var len = arr.length;
    if(len == 0){
        return 0;
    } else if (len == 1){
        return arr[0];
    } else {
        return arr[0] + sum(arr.slice(1));
    }
}
  $('.table_type1 input.words').blur(function(){
    var thisval=Number($(this).val());
    var thiswords=Number($(this).parents('tr').find('.num').text().split('%')[0])
    var worbox=(thisval*thiswords)/100;
    $(this).parents('tr').find('.result').text(worbox);
    var allnum=[];
    $('.table_type1 input.words').each(function(){
      allnum.push(Number($(this).parents('tr').find('.result').text()))
    })
    var a=sum(allnum)
    $('#all').text(a)
  })
</script>

</body>
</html>