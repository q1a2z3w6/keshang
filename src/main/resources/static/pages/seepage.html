<!doctype html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>项目</title>
    <link rel="stylesheet" href="../lib/layui/css/layui.css">
    <script src="../lib/layui/layui.js"></script>
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/seepage.css">
    <link rel="stylesheet" href="../css/bootstrapStyle/bootstrapStyle.css" type="text/css">
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <style>
        .zzlist,.fllist,.searchfllist{position: relative;}
        #treeDemo,#treeDemo1{
            height: 400px;
            overflow-y: auto;
        }
        .zzlist #treeDemo,.fllist #treeDemo1,.searchfllist #treeDemo2{
            width: 230px;
            display: none;
            position: absolute;
            background: #fff;
            border: 1px solid #ddd;
            left: 0;
            top: 32px;
            z-index: 100;
        }
        .salesbox{
            padding: 15px;
        }
        .salesbox label{
            margin: 10px;
        }
    </style>
</head>

<body>
    <div class="header">
        <div class="logo">
            <img src="../images/logo.jpg" alt="">
        </div>
            <div class="banner">
                <img class="logo-icon" src="../images/logo-icon.jpg" alt="">
                <ul class="layui-nav layui-bg-cyan">
                    <li class="layui-nav-item">
                        <a href="javascript:;">供应商管理</a>
                        <dl class="layui-nav-child">
                            <dd><a href="">供应商维护</a></dd>
                            <dd><a href="">供应商审核</a></dd>
                        </dl>
                    </li>
                    <li class="layui-nav-item">
                        <a href="javascript:;">系统设置</a>
                        <dl class="layui-nav-child">
                            <dd><a href="">供应商类别</a></dd>
                            <dd><a href="">发布消息</a></dd>
                            <dd><a href="">发布招商公告</a></dd>
                        </dl>
                    </li>
                    <li class="layui-nav-item">
                        <a href="javascript:;">个人中心</a>
                        <dl class="layui-nav-child">
                            <dd><a href="">基本信息</a></dd>
                            <dd><a href="">密码修改</a></dd>
                        </dl>
                    </li>
                </ul>
            </div>
            <div>
                <div class="com-crumb">
                    <i class="layui-icon">&#xe68e;</i>
                    <span class="">
                <a href="/">首页</a><span class="fg">/</span><a><cite>导航元素</cite></a>
                    </span>
                </div>
            </div>
        </div>
        <div class="wrapper">
            <div class="clearfix main">
                <div class="fl nav">
                    <ul id="treeDemo" style="width:230px;" class="ztree"></ul>
                </div>
                <div class="fr">
                    <div class="top clearfix">
                        <span class="fl title" id="searchtype">精品材料设备类 </span><i class="layui-icon-right layui-icon fl"></i>
                    </div>
                    <div class="content">
                        <div class="brandmsgs">
                            <ul>
                                <li class="clearfix listtwo">
                                    <div class="fl">供方名称：</div>
                                    <div class="fr">
                                        <input type="text" id="searchname" name="title" placeholder="请输入搜索内容" autocomplete="off" class="layui-input" style="width: 200px;display: inline-block;">

                                    </div>
                                </li>
                                <li class="clearfix listtwo">
                                    <div class="fl">注册地址：</div>
                                    <div class="fr">
                                        <input type="text" id="searchaddress" name="title" placeholder="请输入注册地址" autocomplete="off" class="layui-input" style="width: 200px;display: inline-block;">
                                    </div>
                                </li>
                                <li class="clearfix listtwo">
                                    <div class="fl">主营业务区域：</div>
                                    <div class="fr">
                                        <input type="text" id="searchbusiness" name="title" placeholder="请输入主营业务区域" autocomplete="off" class="layui-input" style="width: 200px;display: inline-block;">
                                    </div>
                                </li>
                                <li class="clearfix listtwo">
                                    <div class="fl">品牌：</div>
                                    <div class="fr">
                                        <input type="text" id="searchname1" name="title" placeholder="请输入品牌" autocomplete="off" class="layui-input" style="width: 200px;display: inline-block;">

                                    </div>
                                </li>
                                <li class="clearfix listtwo">
                                    <div class="fl">供方资质：</div>
                                    <!--<div class="fr zizhi">-->
                                        <!--<span class="hasd">有</span>-->
                                        <!--<span>无</span>-->
                                    <!--</div>-->
                                    <!--<div class="clearfix type2"><span class="fl typespan">供方资质:</span>-->
                                    <div class="fl zizhi">
                                        <input type="text" name="" style="width: 200px" class="layui-input" id="searchfl" readonly placeholder="请选择供方资质">
                                        <ul id="treeDemo2" style="    width: 188px;position: absolute;background: #fff; border: 1px solid #eee;" class="ztree"></ul>
                                        </div>
                                </li>
                                <li class="clearfix listtwo">
                                    <div class="fl">有无合作：</div>

                                    <div class="fl zizhi">
                                        <select class="cope">
                                            <option value="有合作">有合作</option>
                                            <option value="无合作">无合作</option>
                                        </select>
                                    </div>
                                </li>

                            </ul>
                            <div class="branserch">
                                <button type="button" class="layui-btn layui-btn" onclick="search()">搜索</button>
                                <button type="button" class="layui-btn layui-btn" onclick="search('all')">全类别搜索</button>
                            </div>
                        </div>
                        <div class="pagetable clearfix">
                            <div class="fl"><span>供方信息列表</span></div>
                            <div class="fr">
                                <span><i class="pagenum">1</i>/<i class="pageAll">0</i></span>
                                <span class="page page-left page-end layui-icon layui-icon-left"></span>
                                <span class="page page-right layui-icon layui-icon-right"></span>
                            </div>
                        </div>
                        <div class="table record_data">
                            <table border="0" cellpadding="0" cellspacing="0" align="left" width="100%">
                                <thead>
                                    <tr>
                                        <th>序号</th>
                                        <th>名称</th>
                                        <th>分类</th>
                                        <th>资质</th>
                                        <th>认证体系</th>
                                        <th>主营业务</th>
                                    </tr>
                                </thead>
                                <tbody id="tabledata"></tbody>
                            </table>
                        </div>
                        <p id="nodata" style="text-align: center;margin-top: 20px;"></p>
                    </div>
                </div>
            </div>
        </div>
        <script src="../lib/layui/layui.all.js"></script>
        <script type="text/javascript" src="../js/jquery.ztree.core.js"></script>
        <script type="text/javascript" src="../js/jquery.ztree.excheck.js"></script>
        <script type="text/javascript" src="../js/jquery.ztree.exedit.js"></script>
        <script>

            var jsonCul = {};


        $('.othertext>span').click(function() {
            var text = $(this).html();
            $('#name2').val(text);
        });

        layui.use('laypage', function() {
            var laypage = layui.laypage;

        });

        function searchtype() {
            var name = $('#name2').val();
            if (name.trim().length == 0) {
                layer.msg('请输入搜索供应商的名称');
                getdata();
                return
            }
            var data = JSON.parse(localStorage.getItem('datalist'));
            var hasdata = [];
            data.map(function(item, idx) {
                if (item.type == name) {
                    hasdata.push(item);
                }
            });
            getdata(hasdata)
        }
        // 更多选项展开收齐
        $('.addmore').click(function() {
            $('.moredata').slideToggle();
        });
        $('#nav_menu a').click(function(event) {
            $('#nav_menu a').css('color', '#333');
            $(this).css('color', 'red');
        });
        // 搜索供应商名称
        function search(all) {
            var name = $('#searchname').val();
            if (name.trim().length == 0) {
                layer.msg('请输入搜索供应商的名称');
                getdata();
                return
            }
            jsonCul = {};
            if(all==undefined){
                if($("#searchtype").text().trim().length!=0){
                    jsonCul["type"]="%"+$("#searchtype").text().trim()+"%";
                }
            }
            if($("#searchname").val().trim().length!=0){
                jsonCul["name"]="%"+$("#searchname").val().trim()+"%";
            }
            if($("#searchaddress").val().trim().length!=0){
                jsonCul["address"]="%"+$("#searchaddress").val().trim()+"%";
            }
            if($("#searchbusiness").val().trim().length!=0){
                jsonCul["business"]="%"+$("#searchbusiness").val().trim()+"%";
            }
            if($("#searchfl").val().trim().length!=0){
                jsonCul["diode"]="%"+$("#searchfl").val().trim()+"%";
            }
            jsonCul["size"]=20;
            jsonCul["pageNum"]=1;
            var i =0;
            postJsonData(JSON.stringify(jsonCul),"/findCustomerLikeCount",function(data){
                localStorage.removeItem("datalist");
                i = data.data[0];
                $(".pagenum").html(1);
                var p = Math.ceil(i/jsonCul.size);
                $(".pageAll").html(p);
            });
            postJsonData(JSON.stringify(jsonCul),"/findCustomerLike",function(data){
                localStorage.removeItem("datalist");
                if(data.code==200){
                    localStorage.setItem("datalist",JSON.stringify(data.data));
                    getdata(data.data);
                }else{
                    getdata();
                }
            });

        };
        // 默认执行获取本地数据
        getdata();
        // 在本地获取所有的商家信息
        function getdata(data) {
            if (!data) {
                data = JSON.parse(localStorage.getItem('datalist'));
            }
            if (data == null || data.length == 0) {
                $('#nodata').html('没有数据');
                data = []
            }
            var html = '';
            data.map(function(item, idx) {
                html += '<tr>' +
                    '<td>' + parseInt(idx + 1) + '</td>' +
                    '<td onclick="suppliermsg('+idx+')">' + item.name + '</td>' +
                    '<td>' + item.type + '</td>' +
                    '<td>' + item.diode + '</td>' +
                    '<td>' + item.sales + '</td>' +
                    '<td>' + item.business + '</td>' +
                    '</tr>'
            });
            $('#tabledata').html(html);
        }

        // 跳转到表格信息
        function suppliermsg(obj) {
            // console.log($(obj).name)
            // parent.$("#nowpage").attr("src","pages/supplierinformation.html");
            localStorage.setItem("idx",obj);
            window.location.href = '../pages/supplierinformation.html'
        }
        // $('.nav li').click(function () {
        //     $(this).addClass('active').siblings().removeClass('active');
        //     var word = $(this).text();
        //     $('.title').html(word)
        // });
        // 是否有资质
        $('.zizhi span,.friend span').click(function() {
            $(this).addClass('hasd').siblings().removeClass('hasd');
        });
        // 点击左侧分页
        $('.page-left').click(function() {
            var num = parseInt($('.pagenum').html());
            var numall = parseInt($('.pageAll').html());
            if (num >= 2) {
                num--;
                jsonCul.pageNum=num;
                postJsonData(JSON.stringify(jsonCul),"/findCustomerLike",function(d){
                    if(d.code==200){
                        localStorage.removeItem("datalist");
                        localStorage.setItem("datalist",JSON.stringify(d.data));
                        getdata(d.data);
                    }else{
                        layer.msg(d.msg);
                    }

                });
            }
            if (num > 1 && num < numall) {
                $('.page-left').removeClass('page-end');
                $('.page-right').removeClass('page-end')
            }
            if (num == 1) {
                $('.page-left').addClass('page-end')
            }
            $('.pagenum').html(num)
        });
        // 点击右侧分页
        $('.page-right').click(function() {
            var num = parseInt($('.pagenum').html());
            var numall = parseInt($('.pageAll').html());
            if (num <= (numall - 1)) {
                num++;
                jsonCul.pageNum=num;
                postJsonData(JSON.stringify(jsonCul),"/findCustomerLike",function(d){
                    if(d.code==200){
                        localStorage.removeItem("datalist");
                        localStorage.setItem("datalist",JSON.stringify(d.data));
                        getdata(d.data);
                    }else{
                        layer.msg(d.msg);
                    }

                });
            }
            if (num > 1 && num < numall) {
                $('.page-left').removeClass('page-end');
                $('.page-right').removeClass('page-end')
            }
            if (num == numall) {
                $('.page-right').addClass('page-end')
            }
            $(".pagenum").html(num)
        });


        //树形
        var setting = {
            view: {
                removeHoverDom: removeHoverDom,
                selectedMulti: false,
                addDiyDom: addDiyDom
            },

            callback: {
                beforeClick: zTreeBeforeClick
            },
            data: {
                simpleData: {
                    enable: true
                }
            },

        };

        function addDiyDom(treeId, treeNode) {
            var spaceWidth = 5;
            var switchObj = $("#" + treeNode.tId + "_switch"),
                icoObj = $("#" + treeNode.tId + "_ico");
            switchObj.remove();
            icoObj.before(switchObj);

            if (treeNode.level > 1) {
                var spaceStr = "<span style='display: inline-block;width:" + (spaceWidth * treeNode.level) + "px'></span>";
                switchObj.before(spaceStr);
            }
            var spantxt = $("#" + treeNode.tId + "_span").html();
            if (spantxt.length > 9) {
                spantxt = spantxt.substring(0, 9) + "...";
                $("#" + treeNode.tId + "_span").html(spantxt);
            }
        }

        function getFilePath(treeObj) {
            if (treeObj == null) return "";
            var filename = treeObj.name;
            var pNode = treeObj.getParentNode();
            if (pNode != null) {
                filename = getFilePath(pNode) + ">" + filename;
            }
            return filename;
        }

        function zTreeBeforeClick(treeId, treeNode, clickFlag) {
            console.log(treeNode);

            $('.title').html(getFilePath(treeNode))
        };

        var zNodes = [


            { id: 604, pId: 0, name: "总承包" },
            { id: 605, pId: 604, name: '建筑总承包' },
            { id: 606, pId: 604, name: '机电总承包' },
            { id: 607, pId: 604, name: '电力工程总承包' },
            { id: 608, pId: 604, name: '市政总承包' },
            { id: 609, pId: 604, name: '其他' },
            { id: 610, pId: 0, name: '专业分包' },
            { id: 611, pId: 610, name: '岩土勘察工程' },
            { id: 612, pId: 610, name: '测绘工程' },
            { id: 613, pId: 610, name: '土护降工程' },
            { id: 614, pId: 610, name: '地基基础工程' },
            { id: 615, pId: 610, name: '基坑监测工程' },
            { id: 616, pId: 610, name: '材料检测工程' },
            { id: 617, pId: 610, name: '钢结构工程' },
            { id: 618, pId: 610, name: '消防系统设计、供应及安装工程' },
            { id: 619, pId: 610, name: '机电安装工程' },
            { id: 620, pId: 610, name: '弱电系统设计、供应及安装工程' },
            { id: 621, pId: 610, name: '景观园林施工工程' },
            { id: 622, pId: 610, name: '精装修施工工程' },
            { id: 623, pId: 610, name: '幕墙分包工程（含外窗）' },
            { id: 624, pId: 610, name: '同层排水分包工程' },
            { id: 625, pId: 610, name: '防水分包工程' },
            { id: 626, pId: 610, name: '防腐保温工程专业承包' },
            { id: 627, pId: 610, name: '爆破与拆除工程专业承包' },
            { id: 628, pId: 610, name: '信号增强' },
            { id: 629, pId: 610, name: '环保工程专业承包' },
            { id: 630, pId: 610, name: '管道工程专业承包' },
            { id: 631, pId: 610, name: '城市轨道交通工程专业承包' },
            { id: 632, pId: 610, name: '城市及道路照明工程专业承包' },
            { id: 633, pId: 610, name: '体育场地设施工程专业承包' },
            { id: 634, pId: 610, name: '特种专业工程专业承包' },
            { id: 635, pId: 610, name: '有线电视' },
            { id: 636, pId: 610, name: '卫星电视' },
            { id: 637, pId: 610, name: '音视频及舞台灯光工程专业承包' },
            { id: 638, pId: 610, name: '人防工程专业承包' },
            { id: 639, pId: 610, name: '楼体泛光照明设计、供应及安装工程' },
            { id: 640, pId: 610, name: '信报箱供应及安装' },
            { id: 641, pId: 610, name: '室内外标识供应及安装' },
            { id: 642, pId: 610, name: '小市政道路、雨污水、中水、上水工程（红线内）及红线内消防水、热水' },
            { id: 643, pId: 610, name: '大市政道路（管廊）、雨污水、上水工程（红线外）及红线外消防水、热水' },
            { id: 644, pId: 610, name: '电力（红线内）及变配电设备安装工程' },
            { id: 645, pId: 610, name: '电力（红线外）及变配电设备安装工程' },
            { id: 646, pId: 610, name: '市政电信管道工程/网络/电视/电信工程（红线内）' },
            { id: 647, pId: 610, name: '市政电信管道工程/网络/电视/电信工程（红线外）' },
            { id: 648, pId: 610, name: '其他专业' },
            { id: 649, pId: 649, name: '建筑材料供应' },
            { id: 650, pId: 649, name: '石材' },
            { id: 651, pId: 649, name: '地板' },
            { id: 652, pId: 649, name: '壁纸' },
            { id: 653, pId: 649, name: '墙地砖' },
            { id: 654, pId: 649, name: '开关及面板' },
            { id: 655, pId: 649, name: '室内灯具' },
            { id: 656, pId: 649, name: '园林灯具' },
            { id: 657, pId: 649, name: '卫生洁具及五金' },
            { id: 658, pId: 649, name: '橱柜（含台面）及五金（龙头、水盆）' },
            { id: 659, pId: 649, name: '淋浴房' },
            { id: 660, pId: 649, name: '电子门锁' },
            { id: 661, pId: 649, name: '室内门锁及五金' },
            { id: 662, pId: 649, name: '户门' },
            { id: 663, pId: 649, name: '户内门' },
            { id: 664, pId: 649, name: '外墙砖' },
            { id: 665, pId: 649, name: '屋面材料' },
            { id: 666, pId: 649, name: '户外大门及围栏' },
            { id: 667, pId: 649, name: '木饰面、衣柜等固定家具' },
            { id: 668, pId: 649, name: '室内活动家具及配饰' },
            { id: 669, pId: 649, name: '其他' },
            { id: 670, pId: 0, name: '机电设备供应' },
            { id: 671, pId: 670, name: '电梯供应' },
            { id: 672, pId: 670, name: '空调主机、末端设备及附属设备供应' },
            { id: 673, pId: 670, name: '锅炉供应' },
            { id: 674, pId: 670, name: '冷却塔供应' },
            { id: 675, pId: 670, name: '柴油发电机供应' },
            { id: 676, pId: 670, name: '智能家居设备' },
            { id: 677, pId: 670, name: '电动窗帘' },
            { id: 678, pId: 670, name: '地板采暖管材及分集水器' },
            { id: 679, pId: 670, name: '户箱、表箱、配电箱柜供应' },
            { id: 680, pId: 670, name: '变压器' },
            { id: 681, pId: 670, name: '高低压柜' },
            { id: 682, pId: 670, name: '直流屏' },
            { id: 683, pId: 670, name: '防火门及防火卷帘门供应' },
            { id: 684, pId: 670, name: '车库门供应' },
            { id: 685, pId: 670, name: '风机' },
            { id: 686, pId: 670, name: '擦窗机' },
            { id: 687, pId: 670, name: '阀门' },
            { id: 688, pId: 670, name: '水泵供货' },
            { id: 689, pId: 670, name: '冷水表、热水表供货' },
            { id: 690, pId: 670, name: '中水水表供货' },
            { id: 691, pId: 670, name: '无负压供水设备供货' },
            { id: 692, pId: 670, name: '热计量表供货' },
            { id: 693, pId: 670, name: '厨房电器及设备' },
            { id: 694, pId: 670, name: '泳池及其他水处理设备供应' },
            { id: 695, pId: 670, name: '健身器材' },
            { id: 696, pId: 670, name: '舞台灯光音响供应' },
            { id: 697, pId: 670, name: '其他设备供应' },
            { id: 698, pId: 0, name: '咨询服务' },
            { id: 699, pId: 698, name: '造价咨询' },
            { id: 700, pId: 698, name: '招标代理' },
            { id: 701, pId: 698, name: '监理' },
            { id: 702, pId: 698, name: '地勘' },
            { id: 703, pId: 698, name: '其他顾问/服务商' },
            { id: 704, pId: 698, name: '经营开发' },
            { id: 705, pId: 704, name: '交通影响评价' },
            { id: 706, pId: 704, name: '环境影响评价' },
            { id: 707, pId: 704, name: '能源技术评价' },
            { id: 708, pId: 704, name: '水环境影响评价' },
            { id: 709, pId: 704, name: '其他前期类' },
            { id: 710, pId: 0, name: '设计' },
            { id: 711, pId: 710, name: '建筑设计' },
            { id: 712, pId: 710, name: '规划设计' },
            { id: 713, pId: 710, name: '施工图设计' },
            { id: 714, pId: 710, name: '施工图审查' },
            { id: 715, pId: 710, name: '结构顾问' },
            { id: 716, pId: 710, name: '景观设计顾问' },
            { id: 717, pId: 710, name: '室内设计顾问' },
            { id: 718, pId: 710, name: '交通顾问' },
            { id: 719, pId: 710, name: '机电设计顾问' },
            { id: 720, pId: 710, name: '智能化设计顾问' },
            { id: 721, pId: 710, name: '照明设计顾问' },
            { id: 722, pId: 710, name: '市政设计' },
            { id: 723, pId: 710, name: '标识设计' },
            { id: 724, pId: 710, name: '软装配饰设计' },
            { id: 725, pId: 710, name: '声学设计顾问' },
            { id: 726, pId: 710, name: '消防顾问' },
            { id: 727, pId: 710, name: '绿色建筑设计顾问' },
            { id: 728, pId: 710, name: '幕墙顾问' },
            { id: 729, pId: 710, name: '厨房顾问' },
            { id: 730, pId: 710, name: '防洪顾问' },
            { id: 731, pId: 710, name: '其他设计顾问' },
            { id: 732, pId: 0, name: '人力行政' },
            { id: 733, pId: 0, name: '投资与资产管理' },
            { id: 734, pId: 0, name: '法律事务' },
            { id: 735, pId: 0, name: '运营管理' },
            { id: 736, pId: 0, name: '企业传播' },
            { id: 737, pId: 0, name: '市场客服' },
            { id: 738, pId: 0, name: '战略发展' }




        ];

        $(document).ready(function() {
            inizTree("/typeList",$("#treeDemo"),setting,zNodes);

            // $.fn.zTree.init($("#treeDemo"), setting, zNodes);

        });

        var newCount = 1;

        function addHoverDom(treeId, treeNode) {
            var sObj = $("#" + treeNode.tId + "_span");
            if (treeNode.editNameFlag || $("#addBtn_" + treeNode.tId).length > 0) return;
            var addStr = "<span class='button add' id='addBtn_" + treeNode.tId +
                "' title='add node' onfocus='this.blur();'></span>";
            sObj.after(addStr);
            var btn = $("#addBtn_" + treeNode.tId);
            if (btn) btn.bind("click", function() {
                var zTree = $.fn.zTree.getZTreeObj("treeDemo");
                zTree.addNodes(treeNode, { id: (100 + newCount), pId: treeNode.id, name: "new node" + (newCount++) });
                return false;
            });
        };

        function removeHoverDom(treeId, treeNode) {
            $("#addBtn_" + treeNode.tId).unbind().remove();
        };
        </script>
        <script>




            var searchsetting = {
                view: {
                    removeHoverDom: removeHoverDom,
                    selectedMulti: false,
                    addDiyDom: addDiyDom
                },

                callback: {
                    beforeClick: searchtypezTreeBeforeClick
                },
                data: {
                    simpleData: {
                        enable: true
                    }
                },

            };

            function addDiyDom(treeId, treeNode) {
                var spaceWidth = 5;
                var switchObj = $("#" + treeNode.tId + "_switch"),
                    icoObj = $("#" + treeNode.tId + "_ico");
                switchObj.remove();
                icoObj.before(switchObj);

                if (treeNode.level > 1) {
                    var spaceStr = "<span style='display: inline-block;width:" + (spaceWidth * treeNode.level) + "px'></span>";
                    switchObj.before(spaceStr);
                }
                var spantxt = $("#" + treeNode.tId + "_span").html();
                if (spantxt.length > 9) {
                    spantxt = spantxt.substring(0, 9) + "...";
                    $("#" + treeNode.tId + "_span").html(spantxt);
                }
            }

            function getFilePath(treeObj) {
                if (treeObj == null) return "";
                var filename = treeObj.name;
                var pNode = treeObj.getParentNode();
                if (pNode != null) {
                    filename = getFilePath(pNode) + ">" + filename;
                }
                return filename;
            }


            function searchtypezTreeBeforeClick(treeId, treeNode, clickFlag) {
                console.log(treeNode);
                $('#searchtit').html(getFilePath(treeNode));
                $('#searchfl').val(treeNode.name);
                $('#treeDemo2').hide()
            };

            var zNodes = [


                { id: 604, pId: 0, name: "总承包" },
                { id: 605, pId: 604, name: '建筑总承包' },
                { id: 606, pId: 604, name: '机电总承包' },
                { id: 607, pId: 604, name: '电力工程总承包' },
                { id: 608, pId: 604, name: '市政总承包' },
                { id: 609, pId: 604, name: '其他' },
                { id: 610, pId: 0, name: '专业分包' },
                { id: 611, pId: 610, name: '岩土勘察工程' },
                { id: 612, pId: 610, name: '测绘工程' },
                { id: 613, pId: 610, name: '土护降工程' },
                { id: 614, pId: 610, name: '地基基础工程' },
                { id: 615, pId: 610, name: '基坑监测工程' },
                { id: 616, pId: 610, name: '材料检测工程' },
                { id: 617, pId: 610, name: '钢结构工程' },
                { id: 618, pId: 610, name: '消防系统设计、供应及安装工程' },
                { id: 619, pId: 610, name: '机电安装工程' },
                { id: 620, pId: 610, name: '弱电系统设计、供应及安装工程' },
                { id: 621, pId: 610, name: '景观园林施工工程' },
                { id: 622, pId: 610, name: '精装修施工工程' },
                { id: 623, pId: 610, name: '幕墙分包工程（含外窗）' },
                { id: 624, pId: 610, name: '同层排水分包工程' },
                { id: 625, pId: 610, name: '防水分包工程' },
                { id: 626, pId: 610, name: '防腐保温工程专业承包' },
                { id: 627, pId: 610, name: '爆破与拆除工程专业承包' },
                { id: 628, pId: 610, name: '信号增强' },
                { id: 629, pId: 610, name: '环保工程专业承包' },
                { id: 630, pId: 610, name: '管道工程专业承包' },
                { id: 631, pId: 610, name: '城市轨道交通工程专业承包' },
                { id: 632, pId: 610, name: '城市及道路照明工程专业承包' },
                { id: 633, pId: 610, name: '体育场地设施工程专业承包' },
                { id: 634, pId: 610, name: '特种专业工程专业承包' },
                { id: 635, pId: 610, name: '有线电视' },
                { id: 636, pId: 610, name: '卫星电视' },
                { id: 637, pId: 610, name: '音视频及舞台灯光工程专业承包' },
                { id: 638, pId: 610, name: '人防工程专业承包' },
                { id: 639, pId: 610, name: '楼体泛光照明设计、供应及安装工程' },
                { id: 640, pId: 610, name: '信报箱供应及安装' },
                { id: 641, pId: 610, name: '室内外标识供应及安装' },
                { id: 642, pId: 610, name: '小市政道路、雨污水、中水、上水工程（红线内）及红线内消防水、热水' },
                { id: 643, pId: 610, name: '大市政道路（管廊）、雨污水、上水工程（红线外）及红线外消防水、热水' },
                { id: 644, pId: 610, name: '电力（红线内）及变配电设备安装工程' },
                { id: 645, pId: 610, name: '电力（红线外）及变配电设备安装工程' },
                { id: 646, pId: 610, name: '市政电信管道工程/网络/电视/电信工程（红线内）' },
                { id: 647, pId: 610, name: '市政电信管道工程/网络/电视/电信工程（红线外）' },
                { id: 648, pId: 610, name: '其他专业' },
                { id: 649, pId: 649, name: '建筑材料供应' },
                { id: 650, pId: 649, name: '石材' },
                { id: 651, pId: 649, name: '地板' },
                { id: 652, pId: 649, name: '壁纸' },
                { id: 653, pId: 649, name: '墙地砖' },
                { id: 654, pId: 649, name: '开关及面板' },
                { id: 655, pId: 649, name: '室内灯具' },
                { id: 656, pId: 649, name: '园林灯具' },
                { id: 657, pId: 649, name: '卫生洁具及五金' },
                { id: 658, pId: 649, name: '橱柜（含台面）及五金（龙头、水盆）' },
                { id: 659, pId: 649, name: '淋浴房' },
                { id: 660, pId: 649, name: '电子门锁' },
                { id: 661, pId: 649, name: '室内门锁及五金' },
                { id: 662, pId: 649, name: '户门' },
                { id: 663, pId: 649, name: '户内门' },
                { id: 664, pId: 649, name: '外墙砖' },
                { id: 665, pId: 649, name: '屋面材料' },
                { id: 666, pId: 649, name: '户外大门及围栏' },
                { id: 667, pId: 649, name: '木饰面、衣柜等固定家具' },
                { id: 668, pId: 649, name: '室内活动家具及配饰' },
                { id: 669, pId: 649, name: '其他' },
                { id: 670, pId: 0, name: '机电设备供应' },
                { id: 671, pId: 670, name: '电梯供应' },
                { id: 672, pId: 670, name: '空调主机、末端设备及附属设备供应' },
                { id: 673, pId: 670, name: '锅炉供应' },
                { id: 674, pId: 670, name: '冷却塔供应' },
                { id: 675, pId: 670, name: '柴油发电机供应' },
                { id: 676, pId: 670, name: '智能家居设备' },
                { id: 677, pId: 670, name: '电动窗帘' },
                { id: 678, pId: 670, name: '地板采暖管材及分集水器' },
                { id: 679, pId: 670, name: '户箱、表箱、配电箱柜供应' },
                { id: 680, pId: 670, name: '变压器' },
                { id: 681, pId: 670, name: '高低压柜' },
                { id: 682, pId: 670, name: '直流屏' },
                { id: 683, pId: 670, name: '防火门及防火卷帘门供应' },
                { id: 684, pId: 670, name: '车库门供应' },
                { id: 685, pId: 670, name: '风机' },
                { id: 686, pId: 670, name: '擦窗机' },
                { id: 687, pId: 670, name: '阀门' },
                { id: 688, pId: 670, name: '水泵供货' },
                { id: 689, pId: 670, name: '冷水表、热水表供货' },
                { id: 690, pId: 670, name: '中水水表供货' },
                { id: 691, pId: 670, name: '无负压供水设备供货' },
                { id: 692, pId: 670, name: '热计量表供货' },
                { id: 693, pId: 670, name: '厨房电器及设备' },
                { id: 694, pId: 670, name: '泳池及其他水处理设备供应' },
                { id: 695, pId: 670, name: '健身器材' },
                { id: 696, pId: 670, name: '舞台灯光音响供应' },
                { id: 697, pId: 670, name: '其他设备供应' },
                { id: 698, pId: 0, name: '咨询服务' },
                { id: 699, pId: 698, name: '造价咨询' },
                { id: 700, pId: 698, name: '招标代理' },
                { id: 701, pId: 698, name: '监理' },
                { id: 702, pId: 698, name: '地勘' },
                { id: 703, pId: 698, name: '其他顾问/服务商' },
                { id: 704, pId: 698, name: '经营开发' },
                { id: 705, pId: 704, name: '交通影响评价' },
                { id: 706, pId: 704, name: '环境影响评价' },
                { id: 707, pId: 704, name: '能源技术评价' },
                { id: 708, pId: 704, name: '水环境影响评价' },
                { id: 709, pId: 704, name: '其他前期类' },
                { id: 710, pId: 0, name: '设计' },
                { id: 711, pId: 710, name: '建筑设计' },
                { id: 712, pId: 710, name: '规划设计' },
                { id: 713, pId: 710, name: '施工图设计' },
                { id: 714, pId: 710, name: '施工图审查' },
                { id: 715, pId: 710, name: '结构顾问' },
                { id: 716, pId: 710, name: '景观设计顾问' },
                { id: 717, pId: 710, name: '室内设计顾问' },
                { id: 718, pId: 710, name: '交通顾问' },
                { id: 719, pId: 710, name: '机电设计顾问' },
                { id: 720, pId: 710, name: '智能化设计顾问' },
                { id: 721, pId: 710, name: '照明设计顾问' },
                { id: 722, pId: 710, name: '市政设计' },
                { id: 723, pId: 710, name: '标识设计' },
                { id: 724, pId: 710, name: '软装配饰设计' },
                { id: 725, pId: 710, name: '声学设计顾问' },
                { id: 726, pId: 710, name: '消防顾问' },
                { id: 727, pId: 710, name: '绿色建筑设计顾问' },
                { id: 728, pId: 710, name: '幕墙顾问' },
                { id: 729, pId: 710, name: '厨房顾问' },
                { id: 730, pId: 710, name: '防洪顾问' },
                { id: 731, pId: 710, name: '其他设计顾问' },
                { id: 732, pId: 0, name: '人力行政' },
                { id: 733, pId: 0, name: '投资与资产管理' },
                { id: 734, pId: 0, name: '法律事务' },
                { id: 735, pId: 0, name: '运营管理' },
                { id: 736, pId: 0, name: '企业传播' },
                { id: 737, pId: 0, name: '市场客服' },
                { id: 738, pId: 0, name: '战略发展' }




            ];




            var newCount = 1;

            function addHoverDom(treeId, treeNode) {
                var sObj = $("#" + treeNode.tId + "_span");
                var addStr = "<span class='button add' id='addBtn_" + treeNode.tId +
                    "' title='add node' onfocus='this.blur();'></span>";
                sObj.after(addStr);
                if (btn) btn.bind("click", function() {
                    var zTree = $.fn.zTree.getZTreeObj("treeDemo");
                    zTree.addNodes(treeNode, { id: (100 + newCount), pId: treeNode.id, name: "new node" + (newCount++) });
                    return false;
                });
            };

            function removeHoverDom(treeId, treeNode) {
                $("#addBtn_" + treeNode.tId).unbind().remove();
            };

            $(document).click(function(e) {
                if (e.target.id != 'searchfl' && e.target.id != 'treeDemo2') {
                    $('#treeDemo2').hide();
                }
            });

            $(document).on('click', '#treeDemo2 li', function(e) {
                e ? e.stopPropagation() : event.cancelBubble = true;
            })


            $(document).on('click', '#searchfl', function() {
    //            alert(1)
                $('#treeDemo2').show();

                inizTree("/diodeList",$("#treeDemo2"),searchsetting,zNodes);

                // $.fn.zTree.init($("#treeDemo2"), searchsetting, zNodes);
            })


            function addsales() {
                var val = '';
                if ($('.salesbox input:checkbox:checked').length < 1) {
                    alert('请选择一项');
                    return;
                }
                $.each($('.salesbox input:checkbox:checked'), function(index) {
                    val += $(this).val();
                    if (index == $('.salesbox input:checkbox:checked').length - 1) {

                    } else {
                        val += ','
                    }
                })
                $('#sales').val(val);
                layer.close(salesbox);

            }

            //        查询按钮
            function searchbox() {

                layer.open({
                    type: 1,
                    title: ['查询', 'font-size:16px;'],
                    area: ['40%', '85%'],
                    fixed: false, //不固定
                    maxmin: true,
                    content: addserarchThml,
                    success: function () {
                        inizTree("/typeList", $("#treeDemo2"), searchsetting, zNodes);
                        // $.fn.zTree.init($("#treeDemo2"), searchsetting, zNodes);
                    }
                });
                $('#closemask').click(function () {
                    search()
                });


                function getVal(controlID, controltype) {
                    var objValue = '';
                    switch (controltype) {
                        case 'text': //文本输入框
                            objValue = $.trim($('#' + controlID + '').val()); //取值除去所有的空格
                            break;
                        case 'radio': //单选框
                            objValue = $("input[name='" + controlID + "']:checked").val();
                            break;
                        case 'select': //下拉列表
                            objValue = $("#" + controlID + "").val();
                            break;
                        case 'checkbox': //复选框
                            $("input[name='" + controlID + "']:checked").each(function () {
                                objValue += $(this).val() + ",";
                            });
                            break;
                        default:
                            break;
                    }
                    return objValue;
                }

                $('#firsttype').change(function () {
                    var world = getVal('firsttype', 'select');
                    $('.top .title').html(world)
                });
                $('#twotype').change(function () {
                    var world = getVal('twotype', 'select');
                    $('#searchname').val(world);
                })
                // 更多选项展开收齐
                $('.addmore').click(function () {
                    $('.moredata').slideToggle();
                });

                function search() {
                    var name = $('#searchname').val();
                    if (name.trim().length == 0) {
                        getdata();
                    } else {
                        var data = JSON.parse(localStorage.getItem('datalist'));
                        var hasdata = [];
                        data.map(function (item, idx) {
                            if (item.name == name) {
                                hasdata.push(item);
                            }
                        });
                        getdata(hasdata)
                    }
                };

                // 在本地获取所有的商家信息
                function getdata(data) {
                    if (!data) {
                        data = JSON.parse(localStorage.getItem('datalist'));
                    }
                    if (data == null || data.length == 0) {
                        $('#nodata').html('没有数据');
                        data = []
                    }else{
                        $('#nodata').html('');
                    }
                    var html = '';
                    data.map(function (item, idx) {
                        html += '<tr>' +
                            '<td>' + parseInt(idx + 1) + '</td>' +
                            '<td onclick="chousedata(event,' + idx + ')" style="cursor:pointer;">' + item.name + '</td>' +
                            '<td>' + item.type + '</td>' +
                            '<td>' + item.diode + '</td>' +
                            '<td>' + item.sales + '</td>' +
                            '<td>' + item.business + '</td>' +
                            '</tr>'
                    });
                    allhtml.html(html);
                    layer.closeAll()
                }

                // 跳转到表格信息
                function suppliermsg(obj) {
                    // console.log($(obj).name)
                    parent.$("#nowpage").attr("src", 'pages/supplierinformation.html')
                }

                $('.nav li').click(function () {
                    $(this).addClass('active').siblings().removeClass('active');
                    var word = $(this).text();
                    $('.title').html(word)
                });
                // 是否有资质
                $('.zizhi span,.friend span').click(function () {
                    $(this).addClass('hasd').siblings().removeClass('hasd');
                });
                // 点击左侧分页
                $('.page-left').click(function () {
                    var num = parseInt($('.pagenum').html());
                    var numall = parseInt($('.pageAll').html());
                    if (num >= 2) {
                        num--;
                        jsonData.pageNum = num;
                        sendJsonData(JSON.stringify(jsonData), "/customerPages", "post", function (d) {
                            if (d.code == 200) {
                                localStorage.removeItem("datalist");
                                localStorage.setItem("datalist", JSON.stringify(d.data));
                                getdata(d.data);
                            } else {
                                layer.msg(d.msg);
                            }

                        });
                    }

                    if (num > 1 && num < numall) {
                        $('.page-left').removeClass('page-end');
                        $('.page-right').removeClass('page-end')
                    }
                    if (num == 1) {
                        $('.page-left').addClass('page-end')
                    }
                    $('.pagenum').html(num)
                });
                // 点击右侧分页
                $('.page-right').click(function () {
                    var num = parseInt($('.pagenum').html());
                    var numall = parseInt($('.pageAll').html());
                    if (num <= (numall - 1)) {
                        num++;
                        jsonData.pageNum = num;
                        sendJsonData(JSON.stringify(jsonData), "/customerPages", "post", function (d) {
                            if (d.code == 200) {
                                localStorage.removeItem("datalist");
                                localStorage.setItem("datalist", JSON.stringify(d.data));
                                getdata(d.data);
                            } else {
                                layer.msg(d.msg);
                            }

                        });
                    }

                    if (num > 1 && num < numall) {
                        $('.page-left').removeClass('page-end');
                        $('.page-right').removeClass('page-end')
                    }
                    if (num == numall) {
                        $('.page-right').addClass('page-end')
                    }
                    $(".pagenum").html(num)
                });

                // 跳转到表格信息
                function suppliermsg(obj) {
                    // console.log($(obj).name)
                    parent.$("#nowpage").attr("src", 'pages/supplierinformation.html')
                }

            }

            //-------------------------------------------------------------------------
            //-------------------------------------------------------------------------
            //-------------------------------------------------------------------------

            /**
             * post方式ajax
             * @param data post的Json数据
             * @param url 发送路径
             * @param fun 成功的回调函数
             * @param isasync 是否异步发送
             */
            function postJsonData(data, url, fun, isasync) {

                if (isasync == undefined) {
                    isasync = true;
                }
                $.ajax({
                    url: url,
                    data: data,
                    dataType: "json",
                    contentType: "application/json",
                    type: "post",
                    success: fun,
                    async: isasync
                });

            }

            /**
             * get方式ajax
             * @param url get的Json数据
             * @param fun 成功的回调函数
             * @param isasync 是否异步发送
             */
            function getJsonData(url, fun, isasync) {
                if (isasync == undefined) {
                    isasync = true;
                }
                $.ajax({
                    url: url,
                    dataType: "json",
                    contentType: "application/json",
                    type: "get",
                    success: fun,
                    async: isasync
                });

            }

            /**
             * 加载树形结构
             * @param url 树形结构数据请求路径
             * @param tree 树形结构元素
             * @param setting 设置集
             * @param treedata 树形结构数据的存放全局变量
             */
            function inizTree(url, tree, setting, treedata) {

                var fun = function (data) {

                    if (data.code == 200) {
                        treedata = data.data;
                        $.fn.zTree.init(tree, setting, data.data);
                    } else {
                        layer.msg(data.msg, function () {
                        });
                    }

                }

                getJsonData(url, fun)

            }
        </script>
</body>

</html>