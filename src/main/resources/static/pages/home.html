<!doctype html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>主页</title>
    <link rel="stylesheet" href="../lib/layui/css/layui.css">
    <link rel="stylesheet" href="../css/home.css">
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/add.css">
    <link rel="stylesheet" href="../css/seepage.css">
    <link rel="stylesheet" href="../css/bootstrapStyle/bootstrapStyle.css" type="text/css">
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <style>
        .zzlist,.fllist,.searchfllist{position: relative;}
        #treeDemo,#treeDemo1{
            height: 400px;
            overflow-y: auto;
        }
        .zzlist #treeDemo,.fllist #treeDemo1,.searchfllist #treeDemo2{
            width: 230px;
            display: none;
            position: absolute;
            background: #fff;
            border: 1px solid #ddd;
            left: 0;
            top: 32px;
            z-index: 100;
        }
        .salesbox{
            padding: 15px;
        }
        .salesbox label{
            margin: 10px;
        }
        .businessbox{
            padding: 15px;
        }
        .businessbox label{
            margin: 8px 20px;
            float: left;

        }
        .businessbtn{
            overflow: hidden;
            width: 100%;
        }
        .businessbox label input{
            margin:0 3px;
        }
        .zzlists{
            position: relative;
        }
        .ztrees{
            width: 230px;
            position: absolute;
            top: 32px;
            background: rgb(255, 255, 255);
            z-index: 100;
        }
        .ztrees1{
            width: 230px;
            position: absolute;
            top:40px;
            background: rgb(255, 255, 255);
            z-index: 100;
        }
    </style>
</head>

<body>
<div class="header">
    <div class="logo">
        <img src="../images/logo.jpg" alt="">
    </div>
    <div class="banner">
        <img class="logo-icon" src="../images/logo-icon.jpg" alt="">
        <ul class="layui-nav layui-bg-cyan">
            <li class="layui-nav-item">
                <a href="javascript:;">供应商管理</a>
                <dl class="layui-nav-child">
                    <dd><a href="">供应商维护</a></dd>
                    <dd><a href="">供应商审核</a></dd>
                </dl>
            </li>
            <li class="layui-nav-item">
                <a href="javascript:;">系统设置</a>
                <dl class="layui-nav-child">
                    <dd><a href="">供应商类别</a></dd>
                    <dd><a href="">发布消息</a></dd>
                    <dd><a href="">发布招商公告</a></dd>
                </dl>
            </li>
            <li class="layui-nav-item">
                <a href="javascript:;">个人中心</a>
                <dl class="layui-nav-child">
                    <dd><a href="">基本信息</a></dd>
                    <dd><a href="">密码修改</a></dd>
                </dl>
            </li>
        </ul>
    </div>
    <div>
        <div class="com-crumb">
            <i class="layui-icon">&#xe68e;</i>
            <span class="com-crumb-span">
                <a href="/">首页</a><span class="fg">/</span><a><cite>导航元素</cite></a>
                    </span>
        </div>
    </div>
</div>
<div class="wrapper">
    <div class="btn" style="margin-left:80px">
        <!--<button class="layui-btn" onclick="openadd()">新增-->
        <!--<div>3333</div>-->
        <!--</button>-->

        <div class="zzlists" style="    float: left; margin-right: 15px;">
            <ul id="treeDemos6" style="width:230px;" class="ztree ztrees1">

            </ul>
            <input type="button" name="" class="layui-btn" id="diodes6"  value="新增" readonly></div>


        <button class="layui-btn" onclick="searchbox()">查询</button>
        <button class="layui-btn" onclick="location.href='seepage.html'">管理员查询</button>
        <button class="layui-btn" id="delet">删除</button>
    </div>
    <div class="record_data">
        <table border="0" cellpadding="0" cellspacing="0" align="left" width="100%">
            <thead>
            <tr>
                <th>序号</th>
                <th>名称</th>
                <th>分类</th>
                <th>资质</th>
                <th>销售类别</th>
                <th>主营业务</th>
            </tr>

            </thead>
            <tbody id="tabledata">
            <tr>
                <td>1</td>
                <td>名称</td>
                <td>分类</td>
                <td>资质</td>
                <td>销售类别</td>
                <td>主营业务</td>
            </tr>
            </tbody>
        </table>
    </div>
    <!--             <div id="nodata" style="text-align: center;margin-top: 20px;"></div> -->
    <div id="pages"></div>
</div>
<script src="../lib/layui/layui.all.js"></script>
<script type="text/javascript" src="../js/jquery.ztree.core.js"></script>
<script type="text/javascript" src="../js/jquery.ztree.excheck.js"></script>
<script type="text/javascript" src="../js/jquery.ztree.exedit.js"></script>
<script>

    //个个服务的url
    var diodeUrl = "/diodeList";

    $('#delet').click(function(){
        $("#tabledata tr").remove()
    })
    var allhtml = $('#tabledata');
    //加载导航条
    iniLaypage(JSON.stringify({}));
    /*layui.use('laypage', function() {
        var laypage = layui.laypage;
        //执行一个laypage实例
        laypage.render({
            limit: 20, // 每页条数
            elem: 'pages', //注意，这里的 test1 是 ID，不用加 # 号,
            count: 100 //数据总数，从服务端得到
        });
    });*/
    // 保存提交添加供应商信息
    function getmsg(type) {
        var msg = localStorage.getItem('datalist');
        var data = {
            version:$("#version").val(),//记录版本信息
            id: $('#id').val(),//客商id
            name: $('#name').val(), // 供方名称
            money: $('#money').val(), // 注册资金
            legal: $('#legal').val(), // 法人
            nature: $('#nature').val(), //企业性质
            address: $('#address').val(), //办公地址
            province: $('#province').val(), //区域-省份
            city: $('#city').val(), //区域-城市
            url: $('#url').val(), //官方网站
            nstype: $('#nstype').val(), //纳税人类型
            type: $('#type').val(), // 供方分类
            zyzdate: $('#zyzdate').val(), // 营业执照起始日期
            zzh: $('#zzh').val(), // 营业执照号
            diode: $('#diode').val(), //主营资质
            yyzz: $('#yyzz').val(), // 兼营业务资质
            sales: $('#sales').val(), // 体系认证
            brand: $('#brand').val(), // 产品许可证
            range: $('#range').val(), // 主营业务范围

            general: $('#general').val(), // 总部
            branch: $('#branch').val(), // 分支机构

            business: $('#business').val(), //主营业务区域
            equipment: $('#equipment').val(), //加工生产设备
            apc: $('#apc').val(), //年产能力
            after: $('#after').val(), //售后服务能力
            wxie: $('#wxie').val(), //外协厂家
            ywyj: $('#ywyj').val(), //以往业绩

            linkman: $('#linkman').val(), // 联系人
            phone: $('#phone').val(), // 联系固话
            tel: $('#tel').val(), // 手机
            email: $('#email').val() // 邮箱
        };
        for (var i in data) {
            if(i!='version'&&i!='id'){
                if (data[i].trim().length == 0) {
                    layer.msg('请添加完所有的信息');
                    return
                }
            }
        }
        if (type != undefined) {

            updateKeshang(msg,data);

        } else {

            saveKeshang(msg,data);

        }
        getdatas();
        // layer.closeAll(); // 关闭layui的弹窗
    }
    getdatas();
    // 在本地获取所有的商家信息
    function getdatas() {
        var data = JSON.parse(localStorage.getItem('datalist'));
        // if (data == null || data.length == 0) {
        //     $('#nodata').html('没有数据');
        //     data = []
        // }
        var html = '';
        data.map(function(item, idx) {
            html += '<tr>' +
                '<td>' + parseInt(idx + 1) + '</td>' +
                '<td onclick="chousedata(event,' + idx + ')" style="cursor:pointer;">' + item.name + '</td>' +
                '<td>' + item.type + '</td>' +
                '<td>' + item.diode + '</td>' +
                '<td>' + item.sales + '</td>' +
                '<td>' + item.business + '</td>' +
                '</tr>'
        });
        $('#tabledata').html(html);
    }
    //        查询。修改
    function chousedata(event, idx) {
        event.stopPropagation(); // 阻止时间冒泡
        let addhtml = '<div style="padding-top: 20px;"><form class="layui-form"> <!-- 提示：如果你不想用form，你可以换成div等任何一个普通元素 -->' +
            '<h4>（一）供方基本信息</h4>' +
            '<div class="clearfix listitem">' +
            '   <div class="fl">' +
            '       <p>供方名称</p>' +
            '       <div><input type="text" name="" class="layui-input" id="name"></div>' +
            '   </div>' +
            '   <div class="fr">' +
            '       <p>注册资金</p>' +
            '       <div><input type="number" name="" class="layui-input" id="money"></div>' +
            '   </div>' +
            '</div>' +

            '<div class="clearfix listitem">' +
            '   <div class="fl">' +
            '       <p>法人代表</p>' +
            '       <div><input type="text" name="" class="layui-input" id="legal"></div>' +
            '    </div>' +
            '    <div class="fr">' +
            '       <p>企业性质</p>' +
            '       <div><select name="interest" id="nature"  style="display:block;width:100%">' +
            '           <option value="0">外资</option>' +
            '           <option value="1" selected="">合资</option>' +
            '           <option value="2">国企</option>' +
            '           <option value="3">私企</option>' +
            '           <option value="4">集体所有制</option>' +
            '           <option value="5">其他</option>' +
            '       </select></div>' +
            '    </div>' +
            '</div>' +

            '<div class="clearfix listitem">' +
            '   <div class="fl">' +
            '       <p>办公地址</p>' +
            '       <div><input type="text" name="" class="layui-input" id="address"></div>' +
            '   </div>' +
            '   <div class="fr">' +
            '       <p>地域</p>' +
            '       <div><select name="interest" id="province"  style="display:inline-block;width:48%">' +
            '           <option value="0" selected="">广东省</option>' +
            '           <option value="1" >江苏省</option>' +
            '           <option value="2">浙江省</option>' +
            '           <option value="3">山东省</option>' +
            '       </select><select name="interest" id="city"  style="display:inline-block;width:48%;margin-left:2%">' +
            '           <option value="0">深圳市</option>' +
            '           <option value="1" selected="">广州市</option>' +
            '           <option value="2">东莞市</option>' +
            '           <option value="3">佛山市</option>' +
            '       </select></div>' +
            '   </div>' +
            '</div>' +

            '<div class="clearfix listitem">' +
            '   <div class="fl">' +
            '       <p>官方网站</p>' +
            '       <div><input type="text" name="" class="layui-input" id="url"></div>' +
            '   </div>' +
            '   <div class="fr">' +
            '       <p>纳税人类型</p>' +
            '       <div><input type="text" name="" class="layui-input" id="nstype"></div>' +
            '   </div>' +
            '</div>' +

            '<div class="clearfix listitem">' +
            '   <div class="fl">' +
            '       <p>供方分类</p>' +
            '       <div class="fllist"><ul id="treeDemo1" style="width:230px;" class="ztree"></ul><input type="text" name="" class="layui-input" readonly id="type"></div>' +
            '   </div>' +
            '   <div class="fr">' +
            '       <p>营业执照起始日期</p>' +
            '       <div> <input type="text" name="date" id="zyzdate" lay-verify="date" placeholder="yyyy-MM-dd" autocomplete="off" class="layui-input"></div>' +
            '   </div>' +
            '</div>' +

            '<div class="clearfix listitem">' +
            '   <div class="fl">' +
            '       <p>营业执照号</p>' +
            '       <div><input type="text" name="" class="layui-input" id="zzh"></div>' +
            '   </div>' +
            '   <div class="fr">' +
            '       <p>主营资质</p>' +
            '       <div class="zzlist"><ul id="treeDemo" style="width:230px;" class="ztree"></ul><input type="text" name="" class="layui-input" id="diode" readonly></div>' +
            '   </div>' +
            '</div>' +

            '<div class="clearfix listitem">' +
            '            <div class="fl">' +
            '                <p>兼营业务资质</p>' +
            '                <div><input type="text" name="" class="layui-input" id="yyzz"></div>' +
            '            </div>' +
            '            <div class="fr">' +
            '                <p>体系认证</p>' +
            '                <div><input type="text" name="" class="layui-input" id="sales"></div>' +
            '            </div>' +
            '        </div>' +

            '        <div class="clearfix listitem">' +
            '            <div class="fl">' +
            '                <p>产品许可证</p>' +
            '                <div><input type="text" name="" class="layui-input" id="brand"></div>' +
            '            </div>' +
            '            <div class="fr">' +
            '                <p>主营业务范围</p>' +
            '                <div><input type="text" name="" class="layui-input" id="range"></div>' +
            '            </div>' +
            '        </div>' +

            '<br>' +
            '<h4>（二）供方机构信息</h4>' +
            ' <div class="clearfix listitem">' +
            '            <div class="fl">' +
            '                <p>总部</p>' +
            '                <div><input placeholder="请输入内容" type="text" name="" class="layui-input" id="general" ></div>' +
            '            </div>' +
            '            <div class="fr">' +
            '                <p>分支机构</p>' +
            '                <div><input type="text" name="" class="layui-input" id="branch"></div>' +
            '   </div>' +
            '</div>' +
            '<br>' +
            '<h4>（三）供方业务状况</h4>' +
            ' <div class="listitem">' +
            '            <div class="">' +
            '                <p>主营业务区域</p>' +
            '                <div><input type="text" name="" class="layui-input" id="business"></div>' +
            '            </div>' +
            '</div>' +
            ' <div class="listitem">' +
            '            <div class="">' +
            '                <p>加工生产设备</p>' +
            '                <div><input type="text" name="" class="layui-input" id="equipment"></div>' +
            '            </div>' +
            '</div>' +
            ' <div class="listitem">' +
            '            <div class="">' +
            '                <p>年产能力</p>' +
            '                <div><input type="text" name="" class="layui-input" id="apc"></div>' +
            '            </div>' +
            '</div>' +
            ' <div class="listitem">' +
            '            <div class="">' +
            '                <p>售后服务能力</p>' +
            '                <div><input type="text" name="" class="layui-input" id="after"></div>' +
            '            </div>' +
            '</div>' +
            ' <div class="listitem">' +
            '            <div class="">' +
            '                <p>外协厂家</p>' +
            '                <div><input type="text" name="" class="layui-input" id="wxie"></div>' +
            '            </div>' +
            '</div>' +
            ' <div class="listitem">' +
            '            <div class="">' +
            '                <p>以往业绩（项目名称、开发商、合同内容、规模、状态）</p>' +
            '                <div><input type="text" name="" class="layui-input" id="ywyj"></div>' +
            '            </div>' +
            '</div>' +

            '<br>' +
            '<h4>（四）供方联系方式</h4>' +


            '        <div class="clearfix listitem">' +
            '            <div class="fl">' +
            '                <p>联系人</p>' +
            '                <div><input type="text" name="" class="layui-input" id="linkman"></div>' +
            '            </div>' +
            '            <div class="fr center">' +
            '                <p>联系固话</p>' +
            '                <div><input type="text" name="" class="layui-input" id="phone"></div>' +
            '            </div>' +

            '        </div>' +

            '        <div class="clearfix listitem">' +
            '            <div class="fl">' +
            '                <p>手机</p>' +
            '                <div><input type="text" name="" class="layui-input" id="tel"></div>' +
            '            </div>' +
            '            <div class="fr">' +
            '                <p>邮箱</p>' +
            '                <div><input type="text" name="" class="layui-input" id="email"></div>' +
            '            </div>' +
            '        </div>' +
            '        <div class="clearfix listitem">' +
            '            <div class="fl">' +
            '                <p>附件清单</p>' +
            '                <div><button type="button" class="layui-btn" id="upfile1"><i class="layui-icon">&#xe67c;</i>上传文件</button></div>' +
            '            </div>' +

            '        </div>' +
            '        <div class="textcenter">' +
            '            <button id="startupfile" class="layui-btn" type="button" onclick="getmsg(' + idx + ')">保存</button>' +
            '            <button class="layui-btn canclemodel" type="button" onclick="cancleall()">取消</button>' +
            '        </div>' +
            '       <input type="hidden" id="id"/>' +
            '       <input type="hidden" id="version"/>' +
            '    </form></div>';
        $('.canclemodel').click(function() {
            layer.closeAll()
        });
        var datalist = JSON.parse(localStorage.getItem('datalist'));
        var nowdata = datalist[idx];
        layer.open({
            type: 1,
            title: '查看并修改供应商信息',
            offset: 't',
            maxmin: true,
            //                offset: '100px',
            area: ['85%', '100%'],
            content: addhtml, // iframe的url
            success: function() {
                // $.fn.zTree.init($("#treeDemo"), setting, zyzz);
                //
                // $.fn.zTree.init($("#treeDemo1"), settingtype, zNodes);
                $("#version").val(nowdata.version);// 信息版本
                $('#id').val(nowdata.id); // id
                $('#name').val(nowdata.name); // 供方名称
                $('#money').val(nowdata.money); // 注册资金
                $('#legal').val(nowdata.legal), // 法人
                    $('#nature').val(nowdata.nature); //企业性质
                $('#address').val(nowdata.address); //办公地址
                $('#province').val(nowdata.province); //区域-省份
                $('#city').val(nowdata.city); //区域-城市
                $('#url').val(nowdata.url); //官方网站
                $('#nstype').val(nowdata.nstype); //纳税人类型
                $('#type').val(nowdata.type); // 供方分类
                $('#zyzdate').val(nowdata.zyzdate); // 营业执照起始日期
                $('#zzh').val(nowdata.zzh); // 营业执照号
                $('#diode').val(nowdata.diode); //主营资质
                $('#yyzz').val(nowdata.yyzz); // 兼营业务资质
                $('#sales').val(nowdata.sales); // 体系认证
                $('#brand').val(nowdata.brand); // 产品许可证
                $('#range').val(nowdata.range); // 主营业务范围
                $('#general').val(nowdata.general); // 总部
                $('#branch').val(nowdata.branch); // 分支机构
                $('#business').val(nowdata.business); //主营业务区域
                $('#equipment').val(nowdata.equipment); //加工生产设备
                $('#apc').val(nowdata.apc); //年产能力
                $('#after').val(nowdata.after); //售后服务能力
                $('#wxie').val(nowdata.wxie); //外协厂家
                $('#ywyj').val(nowdata.ywyj); //以往业绩

                $('#linkman').val(nowdata.linkman); // 联系人
                $('#phone').val(nowdata.phone); // 联系固话
                $('#tel').val(nowdata.tel); // 手机
                $('#email').val(nowdata.email); // 邮箱

                initAddHtmlNode();

            }
        });



    }


    //树形
    var setting = {
        view: {
            removeHoverDom: removeHoverDom,
            selectedMulti: false,
            addDiyDom: addDiyDom
        },

        callback: {
            beforeClick: zTreeBeforeClick
        },
        data: {
            simpleData: {
                enable: true
            }
        },

    };
    //        s2
    var settings= {
        view: {
            removeHoverDom: removeHoverDom,
            selectedMulti: false,
            addDiyDom: addDiyDom
        },

        callback: {
            beforeClick: zTreeBeforeClicks
        },
        data: {
            simpleData: {
                enable: true
            }
        },

    };
    //        s3
    var settingsa= {
        view: {
            removeHoverDom: removeHoverDom,
            selectedMulti: false,
            addDiyDom: addDiyDom
        },

        callback: {
            beforeClick: zTreeBeforeClicksa
        },
        data: {
            simpleData: {
                enable: true
            }
        },

    };
    //        s4
    var settingsb= {
        view: {
            removeHoverDom: removeHoverDom,
            selectedMulti: false,
            addDiyDom: addDiyDom
        },

        callback: {
            beforeClick: zTreeBeforeClicksb
        },
        data: {
            simpleData: {
                enable: true
            }
        },

    };
    //        s5
    var settingsc= {
        view: {
            removeHoverDom: removeHoverDom,
            selectedMulti: false,
            addDiyDom: addDiyDom
        },

        callback: {
            beforeClick: zTreeBeforeClicksc
        },
        data: {
            simpleData: {
                enable: true
            }
        },

    };
    //        s6
    var settingsd= {
        view: {
            removeHoverDom: removeHoverDom,
            selectedMulti: false,
            addDiyDom: addDiyDom
        },

        callback: {
            beforeClick: zTreeBeforeClicksd
        },
        data: {
            simpleData: {
                enable: true
            }
        },

    };
    var settingtype = {
        view: {
            removeHoverDom: removeHoverDom,
            selectedMulti: false,
            addDiyDom: addDiyDom
        },

        callback: {
            beforeClick: typezTreeBeforeClick
        },
        data: {
            simpleData: {
                enable: true
            }
        },

    };
    var searchsetting = {
        view: {
            removeHoverDom: removeHoverDom,
            selectedMulti: false,
            addDiyDom: addDiyDom
        },

        callback: {
            beforeClick: searchtypezTreeBeforeClick
        },
        data: {
            simpleData: {
                enable: true
            }
        },

    };

    function addDiyDom(treeId, treeNode) {
        var spaceWidth = 5;
        var switchObj = $("#" + treeNode.tId + "_switch"),
            icoObj = $("#" + treeNode.tId + "_ico");
        switchObj.remove();
        icoObj.before(switchObj);

        if (treeNode.level > 1) {
            var spaceStr = "<span style='display: inline-block;width:" + (spaceWidth * treeNode.level) + "px'></span>";
            switchObj.before(spaceStr);
        }
        var spantxt = $("#" + treeNode.tId + "_span").html();
        if (spantxt.length > 9) {
            spantxt = spantxt.substring(0, 9) + "...";
            $("#" + treeNode.tId + "_span").html(spantxt);
        }
    }

    function getFilePath(treeObj) {
        if (treeObj == null) return "";
        var filename = treeObj.name;
        var pNode = treeObj.getParentNode();
        if (pNode != null) {
            filename = getFilePath(pNode) + ">" + filename;
        }
        return filename;
    }

    function zTreeBeforeClick(treeId, treeNode, clickFlag) {
        console.log(treeNode);

        $('#diode').val(getFilePath(treeNode));

        $('#treeDemo').hide()
    };
    //        s2
    function zTreeBeforeClicks(treeId, treeNode, clickFlag) {
        console.log(treeNode);
//                console.log(11111111);
//                    alert(treeNode)
        $('#diodes2').val(getFilePath(treeNode));


        $('#treeDemos2').hide()
    };
    //        s3
    function zTreeBeforeClicksa(treeId, treeNode, clickFlag) {
        console.log(treeNode);


        $('#diodes3').val(getFilePath(treeNode));


        $('#treeDemos3').hide()
    };
    //        s4
    function zTreeBeforeClicksb(treeId, treeNode, clickFlag) {
        console.log(treeNode);
        $('#diodes4').val(getFilePath(treeNode));
        $('#treeDemos4').hide()
    };
    //        s5
    function zTreeBeforeClicksc(treeId, treeNode, clickFlag) {
        console.log(treeNode);
        $('#diodes5').val(getFilePath(treeNode));
        $('#treeDemos5').hide()
    };
    //        s6
    function zTreeBeforeClicksd(treeId, treeNode, clickFlag) {
        console.log(treeNode);
        // $('#type').val(getFilePath(treeNode));
        treeNodee = treeNode;
        openadd();
        $('#treeDemos6').hide();
    };
    function typezTreeBeforeClick(treeId, treeNode, clickFlag) {
        console.log(treeNode);

        $('#type').val(getFilePath(treeNode));
        $('#treeDemo1').hide()
    };

    function searchtypezTreeBeforeClick(treeId, treeNode, clickFlag) {
        console.log(treeNode);
        $('#searchtit').html(getFilePath(treeNode));
        $('#searchfl').val(treeNode.name);
        $('#treeDemo2').hide()
    };

    var zNodes = [


        { id: 604, pId: 0, name: "总承包" },
        { id: 605, pId: 604, name: '建筑总承包' },
        { id: 606, pId: 604, name: '机电总承包' },
        { id: 607, pId: 604, name: '电力工程总承包' },
        { id: 608, pId: 604, name: '市政总承包' },
        { id: 609, pId: 604, name: '其他' },
        { id: 610, pId: 0, name: '专业分包' },
        { id: 611, pId: 610, name: '岩土勘察工程' },
        { id: 612, pId: 610, name: '测绘工程' },
        { id: 613, pId: 610, name: '土护降工程' },
        { id: 614, pId: 610, name: '地基基础工程' },
        { id: 615, pId: 610, name: '基坑监测工程' },
        { id: 616, pId: 610, name: '材料检测工程' },
        { id: 617, pId: 610, name: '钢结构工程' },
        { id: 618, pId: 610, name: '消防系统设计、供应及安装工程' },
        { id: 619, pId: 610, name: '机电安装工程' },
        { id: 620, pId: 610, name: '弱电系统设计、供应及安装工程' },
        { id: 621, pId: 610, name: '景观园林施工工程' },
        { id: 622, pId: 610, name: '精装修施工工程' },
        { id: 623, pId: 610, name: '幕墙分包工程（含外窗）' },
        { id: 624, pId: 610, name: '同层排水分包工程' },
        { id: 625, pId: 610, name: '防水分包工程' },
        { id: 626, pId: 610, name: '防腐保温工程专业承包' },
        { id: 627, pId: 610, name: '爆破与拆除工程专业承包' },
        { id: 628, pId: 610, name: '信号增强' },
        { id: 629, pId: 610, name: '环保工程专业承包' },
        { id: 630, pId: 610, name: '管道工程专业承包' },
        { id: 631, pId: 610, name: '城市轨道交通工程专业承包' },
        { id: 632, pId: 610, name: '城市及道路照明工程专业承包' },
        { id: 633, pId: 610, name: '体育场地设施工程专业承包' },
        { id: 634, pId: 610, name: '特种专业工程专业承包' },
        { id: 635, pId: 610, name: '有线电视' },
        { id: 636, pId: 610, name: '卫星电视' },
        { id: 637, pId: 610, name: '音视频及舞台灯光工程专业承包' },
        { id: 638, pId: 610, name: '人防工程专业承包' },
        { id: 639, pId: 610, name: '楼体泛光照明设计、供应及安装工程' },
        { id: 640, pId: 610, name: '信报箱供应及安装' },
        { id: 641, pId: 610, name: '室内外标识供应及安装' },
        { id: 642, pId: 610, name: '小市政道路、雨污水、中水、上水工程（红线内）及红线内消防水、热水' },
        { id: 643, pId: 610, name: '大市政道路（管廊）、雨污水、上水工程（红线外）及红线外消防水、热水' },
        { id: 644, pId: 610, name: '电力（红线内）及变配电设备安装工程' },
        { id: 645, pId: 610, name: '电力（红线外）及变配电设备安装工程' },
        { id: 646, pId: 610, name: '市政电信管道工程/网络/电视/电信工程（红线内）' },
        { id: 647, pId: 610, name: '市政电信管道工程/网络/电视/电信工程（红线外）' },
        { id: 648, pId: 610, name: '其他专业' },
        { id: 649, pId: 649, name: '建筑材料供应' },
        { id: 650, pId: 649, name: '石材' },
        { id: 651, pId: 649, name: '地板' },
        { id: 652, pId: 649, name: '壁纸' },
        { id: 653, pId: 649, name: '墙地砖' },
        { id: 654, pId: 649, name: '开关及面板' },
        { id: 655, pId: 649, name: '室内灯具' },
        { id: 656, pId: 649, name: '园林灯具' },
        { id: 657, pId: 649, name: '卫生洁具及五金' },
        { id: 658, pId: 649, name: '橱柜（含台面）及五金（龙头、水盆）' },
        { id: 659, pId: 649, name: '淋浴房' },
        { id: 660, pId: 649, name: '电子门锁' },
        { id: 661, pId: 649, name: '室内门锁及五金' },
        { id: 662, pId: 649, name: '户门' },
        { id: 663, pId: 649, name: '户内门' },
        { id: 664, pId: 649, name: '外墙砖' },
        { id: 665, pId: 649, name: '屋面材料' },
        { id: 666, pId: 649, name: '户外大门及围栏' },
        { id: 667, pId: 649, name: '木饰面、衣柜等固定家具' },
        { id: 668, pId: 649, name: '室内活动家具及配饰' },
        { id: 669, pId: 649, name: '其他' },
        { id: 670, pId: 0, name: '机电设备供应' },
        { id: 671, pId: 670, name: '电梯供应' },
        { id: 672, pId: 670, name: '空调主机、末端设备及附属设备供应' },
        { id: 673, pId: 670, name: '锅炉供应' },
        { id: 674, pId: 670, name: '冷却塔供应' },
        { id: 675, pId: 670, name: '柴油发电机供应' },
        { id: 676, pId: 670, name: '智能家居设备' },
        { id: 677, pId: 670, name: '电动窗帘' },
        { id: 678, pId: 670, name: '地板采暖管材及分集水器' },
        { id: 679, pId: 670, name: '户箱、表箱、配电箱柜供应' },
        { id: 680, pId: 670, name: '变压器' },
        { id: 681, pId: 670, name: '高低压柜' },
        { id: 682, pId: 670, name: '直流屏' },
        { id: 683, pId: 670, name: '防火门及防火卷帘门供应' },
        { id: 684, pId: 670, name: '车库门供应' },
        { id: 685, pId: 670, name: '风机' },
        { id: 686, pId: 670, name: '擦窗机' },
        { id: 687, pId: 670, name: '阀门' },
        { id: 688, pId: 670, name: '水泵供货' },
        { id: 689, pId: 670, name: '冷水表、热水表供货' },
        { id: 690, pId: 670, name: '中水水表供货' },
        { id: 691, pId: 670, name: '无负压供水设备供货' },
        { id: 692, pId: 670, name: '热计量表供货' },
        { id: 693, pId: 670, name: '厨房电器及设备' },
        { id: 694, pId: 670, name: '泳池及其他水处理设备供应' },
        { id: 695, pId: 670, name: '健身器材' },
        { id: 696, pId: 670, name: '舞台灯光音响供应' },
        { id: 697, pId: 670, name: '其他设备供应' },
        { id: 698, pId: 0, name: '咨询服务' },
        { id: 699, pId: 698, name: '造价咨询' },
        { id: 700, pId: 698, name: '招标代理' },
        { id: 701, pId: 698, name: '监理' },
        { id: 702, pId: 698, name: '地勘' },
        { id: 703, pId: 698, name: '其他顾问/服务商' },
        { id: 704, pId: 698, name: '经营开发' },
        { id: 705, pId: 704, name: '交通影响评价' },
        { id: 706, pId: 704, name: '环境影响评价' },
        { id: 707, pId: 704, name: '能源技术评价' },
        { id: 708, pId: 704, name: '水环境影响评价' },
        { id: 709, pId: 704, name: '其他前期类' },
        { id: 710, pId: 0, name: '设计' },
        { id: 711, pId: 710, name: '建筑设计' },
        { id: 712, pId: 710, name: '规划设计' },
        { id: 713, pId: 710, name: '施工图设计' },
        { id: 714, pId: 710, name: '施工图审查' },
        { id: 715, pId: 710, name: '结构顾问' },
        { id: 716, pId: 710, name: '景观设计顾问' },
        { id: 717, pId: 710, name: '室内设计顾问' },
        { id: 718, pId: 710, name: '交通顾问' },
        { id: 719, pId: 710, name: '机电设计顾问' },
        { id: 720, pId: 710, name: '智能化设计顾问' },
        { id: 721, pId: 710, name: '照明设计顾问' },
        { id: 722, pId: 710, name: '市政设计' },
        { id: 723, pId: 710, name: '标识设计' },
        { id: 724, pId: 710, name: '软装配饰设计' },
        { id: 725, pId: 710, name: '声学设计顾问' },
        { id: 726, pId: 710, name: '消防顾问' },
        { id: 727, pId: 710, name: '绿色建筑设计顾问' },
        { id: 728, pId: 710, name: '幕墙顾问' },
        { id: 729, pId: 710, name: '厨房顾问' },
        { id: 730, pId: 710, name: '防洪顾问' },
        { id: 731, pId: 710, name: '其他设计顾问' },
        { id: 732, pId: 0, name: '人力行政' },
        { id: 733, pId: 0, name: '投资与资产管理' },
        { id: 734, pId: 0, name: '法律事务' },
        { id: 735, pId: 0, name: '运营管理' },
        { id: 736, pId: 0, name: '企业传播' },
        { id: 737, pId: 0, name: '市场客服' },
        { id: 738, pId: 0, name: '战略发展' }




    ];

    var zyzz = [
        { id: 1, pId: 0, name: '施工承包' },
        { id: 2, pId: 1, name: '建筑工程施工总承包' },
        { id: 3, pId: 2, name: ' 特级' },
        { id: 4, pId: 2, name: '一级' },
        { id: 5, pId: 2, name: '二级' },
        { id: 6, pId: 2, name: '三级' },
        { id: 7, pId: 1, name: '机电施工总承包' },
        { id: 8, pId: 7, name: ' 特级' },
        { id: 9, pId: 7, name: '一级' },
        { id: 10, pId: 7, name: '二级' },
        { id: 11, pId: 7, name: '三级' },
        { id: 12, pId: 1, name: '市政公用工程施工总承包' },
        { id: 13, pId: 12, name: ' 特级' },
        { id: 14, pId: 12, name: '一级' },
        { id: 15, pId: 12, name: '二级' },
        { id: 16, pId: 12, name: '三级' },
        { id: 17, pId: 1, name: '电力工程施工总承包' },
        { id: 18, pId: 17, name: ' 特级' },
        { id: 19, pId: 17, name: '一级' },
        { id: 20, pId: 17, name: '二级' },
        { id: 21, pId: 17, name: '三级' },
        { id: 22, pId: 1, name: '通信工程施工总承包' },
        { id: 23, pId: 22, name: ' 特级' },
        { id: 24, pId: 22, name: '一级' },
        { id: 25, pId: 22, name: '二级' },
        { id: 26, pId: 22, name: '三级' },
        { id: 27, pId: 1, name: '其他' },
        { id: 28, pId: 27, name: ' 特级' },
        { id: 29, pId: 27, name: '一级' },
        { id: 30, pId: 27, name: '二级' },
        { id: 31, pId: 27, name: '三级' },


        { id: 32, pId: 0, name: '专业分包' },

        { id: 33, pId: 32, name: '消防设施工程专业承包' },
        { id: 34, pId: 33, name: '一级' },
        { id: 35, pId: 33, name: '二级' },
        { id: 36, pId: 33, name: '三级' },

        { id: 37, pId: 32, name: '地基基础工程专业承包' },
        { id: 38, pId: 37, name: '一级' },
        { id: 39, pId: 37, name: '二级' },
        { id: 40, pId: 37, name: '三级' },

        { id: 41, pId: 32, name: '建筑机电安装专业承包' },
        { id: 42, pId: 41, name: '一级' },
        { id: 43, pId: 41, name: '二级' },
        { id: 44, pId: 41, name: '三级' },
        { id: 45, pId: 32, name: '电子与智能化工程专业承包' },
        { id: 46, pId: 45, name: '一级' },
        { id: 47, pId: 45, name: '二级' },
        { id: 48, pId: 45, name: '三级' },

        { id: 49, pId: 32, name: '电力专业承包' },
        { id: 50, pId: 49, name: '一级' },
        { id: 51, pId: 49, name: '二级' },
        { id: 52, pId: 49, name: '三级' },

        { id: 53, pId: 32, name: '市政公用工程专业承包' },
        { id: 54, pId: 53, name: '一级' },
        { id: 55, pId: 53, name: '二级' },
        { id: 56, pId: 53, name: '三级' },
        { id: 57, pId: 32, name: ' 园林景观施工' },
        { id: 58, pId: 57, name: '一级' },
        { id: 59, pId: 57, name: '二级' },
        { id: 60, pId: 57, name: '三级' },
        { id: 61, pId: 32, name: '建筑幕墙专业承包' },
        { id: 62, pId: 61, name: '一级' },
        { id: 63, pId: 61, name: '二级' },
        { id: 64, pId: 61, name: '三级' },
        { id: 65, pId: 32, name: '建筑装修装饰工程专业承包' },
        { id: 66, pId: 65, name: '一级' },
        { id: 67, pId: 65, name: '二级' },
        { id: 68, pId: 65, name: '三级' },

        { id: 69, pId: 32, name: '防水防腐保温工程专业承包' },
        { id: 70, pId: 69, name: '一级' },
        { id: 71, pId: 69, name: '二级' },
        { id: 72, pId: 69, name: '三级' },

        { id: 73, pId: 32, name: '城市及道路照明专业承包' },
        { id: 74, pId: 73, name: '一级' },
        { id: 75, pId: 73, name: '二级' },
        { id: 76, pId: 73, name: '三级' },
        { id: 77, pId: 32, name: ' 钢结构工程专业承包' },
        { id: 78, pId: 77, name: '一级' },
        { id: 79, pId: 77, name: '二级' },
        { id: 80, pId: 77, name: '三级' },
        { id: 81, pId: 32, name: ' 古建筑工程专业承包' },
        { id: 82, pId: 81, name: '一级' },
        { id: 83, pId: 81, name: '二级' },
        { id: 84, pId: 81, name: '三级' },
        { id: 85, pId: 32, name: '输变电工程专业承包' },
        { id: 86, pId: 85, name: '一级' },
        { id: 87, pId: 85, name: '二级' },
        { id: 88, pId: 85, name: '三级' },
        { id: 89, pId: 32, name: '特种工程专业承包' },
        { id: 90, pId: 89, name: '一级' },
        { id: 91, pId: 89, name: '二级' },
        { id: 92, pId: 89, name: '三级' },
        { id: 93, pId: 32, name: '特种设备安装改造维修（锅炉）' },
        { id: 94, pId: 93, name: 'A' },
        { id: 95, pId: 93, name: 'B' },
        { id: 96, pId: 93, name: 'C' },
        { id: 97, pId: 32, name: '特种设备安装改造维修（电梯）：' },
        { id: 98, pId: 97, name: 'A' },
        { id: 99, pId: 97, name: 'B' },
        { id: 100, pId: 97, name: 'C' },
        { id: 101, pId: 32, name: '其他' },
        { id: 102, pId: 101, name: '一级' },
        { id: 103, pId: 101, name: '二级' },
        { id: 104, pId: 101, name: '三级' },


        { id: 105, pId: 0, name: '设计类' },
        { id: 106, pId: 105, name: '建筑装饰工程设计专项' },
        { id: 107, pId: 106, name: '甲级' },
        { id: 108, pId: 106, name: '乙级' },
        { id: 109, pId: 106, name: '丙级' },
        { id: 110, pId: 105, name: '建筑智能化系统设计专项' },
        { id: 111, pId: 110, name: '甲级' },
        { id: 112, pId: 110, name: '乙级' },
        { id: 113, pId: 105, name: '建筑工程' },
        { id: 114, pId: 113, name: '甲级' },
        { id: 115, pId: 113, name: '乙级' },
        { id: 116, pId: 105, name: '建筑幕墙工程设计专项' },
        { id: 117, pId: 116, name: '甲级' },
        { id: 118, pId: 116, name: '乙级' },
        { id: 119, pId: 105, name: '轻型房屋钢结构设计专项' },
        { id: 120, pId: 119, name: '甲级' },
        { id: 121, pId: 119, name: '乙级' },

        { id: 122, pId: 105, name: '风景园林工程设计专项' },
        { id: 123, pId: 122, name: '甲级' },
        { id: 124, pId: 122, name: '乙级' },

        { id: 125, pId: 105, name: '城市规划' },
        { id: 126, pId: 125, name: '甲级' },
        { id: 127, pId: 125, name: '乙级' },
        { id: 128, pId: 105, name: '消防设施工程设计专项' },
        { id: 129, pId: 128, name: '甲级' },
        { id: 130, pId: 128, name: '乙级' },
        { id: 131, pId: 105, name: '环境工程设计专项' },
        { id: 132, pId: 131, name: '甲级' },
        { id: 133, pId: 131, name: '乙级' },
        { id: 134, pId: 105, name: '照明工程设计专项' },
        { id: 135, pId: 134, name: '甲级' },
        { id: 136, pId: 134, name: '乙级' },
        { id: 137, pId: 105, name: '岩土工程勘察' },
        { id: 138, pId: 137, name: '甲级' },
        { id: 139, pId: 137, name: '乙级' },
        { id: 140, pId: 137, name: '丙级' },
        { id: 141, pId: 105, name: '施工图审查' },
        { id: 142, pId: 141, name: '一类' },
        { id: 143, pId: 141, name: '二类' },
        { id: 144, pId: 105, name: '工程勘察综合资质' },
        { id: 145, pId: 144, name: '甲级' },
        { id: 146, pId: 105, name: '测绘' },
        { id: 147, pId: 146, name: '甲级' },
        { id: 148, pId: 146, name: '乙级' },
        { id: 149, pId: 146, name: '丙级' },
        { id: 150, pId: 105, name: '其他' },
        { id: 151, pId: 150, name: '甲级' },
        { id: 152, pId: 150, name: '乙级' },
        { id: 153, pId: 150, name: '丙级' },

        { id: 154, pId: 0, name: '咨询服务' },
        { id: 155, pId: 154, name: '招标代理' },
        { id: 156, pId: 155, name: '甲级' },
        { id: 157, pId: 155, name: '乙级' },
        { id: 158, pId: 154, name: '造价咨询' },
        { id: 159, pId: 158, name: '甲级' },
        { id: 160, pId: 158, name: '乙级' },
        { id: 161, pId: 154, name: '工程监理' },
        { id: 162, pId: 161, name: '甲级' },
        { id: 163, pId: 162, name: '乙级' },
        { id: 164, pId: 162, name: '丙级' },
        { id: 165, pId: 154, name: '其他' },
        { id: 166, pId: 165, name: '甲级' },
        { id: 167, pId: 165, name: '乙级' },
        { id: 168, pId: 154, name: '交通规划' },
        { id: 169, pId: 168, name: '甲级' },
        { id: 170, pId: 168, name: '乙级' },
        { id: 171, pId: 154, name: '节能评估' },
        { id: 172, pId: 171, name: '甲级' },
        { id: 173, pId: 171, name: '乙级' },
        { id: 174, pId: 154, name: '环境影响评价' },
        { id: 175, pId: 174, name: '甲级' },
        { id: 176, pId: 174, name: '乙级' },
        { id: 177, pId: 154, name: '其他' },

    ]



    var newCount = 1;

    function addHoverDom(treeId, treeNode) {
        var sObj = $("#" + treeNode.tId + "_span");
        if (treeNode.editNameFlag || $("#addBtn_" + treeNode.tId).length > 0) return;
        var addStr = "<span class='button add' id='addBtn_" + treeNode.tId +
            "' title='add node' onfocus='this.blur();'></span>";
        sObj.after(addStr);
        var btn = $("#addBtn_" + treeNode.tId);
        if (btn) btn.bind("click", function() {
            var zTree = $.fn.zTree.getZTreeObj("treeDemo");
//                s2
            var zTree2 = $.fn.zTree.getZTreeObj("treeDemos2");
            //                s3
            var zTree3 = $.fn.zTree.getZTreeObj("treeDemos3");
            //                s4
            var zTree4 = $.fn.zTree.getZTreeObj("treeDemos4");
            //                s5
            var zTree5 = $.fn.zTree.getZTreeObj("treeDemos5");
            //                s6
            var zTree6 = $.fn.zTree.getZTreeObj("treeDemos6");
            zTree.addNodes(treeNode, { id: (100 + newCount), pId: treeNode.id, name: "new node" + (newCount++) });
            //                s2
            zTree2.addNodes(treeNode, { id: (100 + newCount), pId: treeNode.id, name: "new node" + (newCount++) });
            //                s3
            zTree3.addNodes(treeNode, { id: (100 + newCount), pId: treeNode.id, name: "new node" + (newCount++) });
            //                s4
            zTree4.addNodes(treeNode, { id: (100 + newCount), pId: treeNode.id, name: "new node" + (newCount++) });
            return false;
            //                s5
            zTree5.addNodes(treeNode, { id: (100 + newCount), pId: treeNode.id, name: "new node" + (newCount++) });
            return false;
            //                s6
            zTree6.addNodes(treeNode, { id: (100 + newCount), pId: treeNode.id, name: "new node" + (newCount++) });
            return false;
        });
    };

    function removeHoverDom(treeId, treeNode) {
        $("#addBtn_" + treeNode.tId).unbind().remove();
    };
    // $(document).on('click',function(e){
    //    if(e.target.id != 'diode' && e.target.id != 'treeDemo'){
    //        $('#treeDemo').hide();
    //    }
    // })
    $(document).click(function(e) {
        if (e.target.id != 'diode' && e.target.id != 'treeDemo') {
            $('#treeDemo').hide();
        }
    });
    //        s2
    $(document).click(function(e) {
        if (e.target.id != 'diodes2' && e.target.id != 'treeDemos2') {
            $('#treeDemos2').hide();
        }
    });
    //        s3
    $(document).click(function(e) {
        if (e.target.id != 'diodes3' && e.target.id != 'treeDemos3') {
            $('#treeDemos3').hide();
        }
    });
    //        s4
    $(document).click(function(e) {
        if (e.target.id != 'diodes4' && e.target.id != 'treeDemos4') {
            $('#treeDemos4').hide();
        }
    });
    //        s5
    $(document).click(function(e) {
        if (e.target.id != 'diodes5' && e.target.id != 'treeDemos5') {
            $('#treeDemos5').hide();
        }
    });
    //        s6
    $(document).click(function(e) {
        if (e.target.id != 'diodes6' && e.target.id != 'treeDemos6') {
            $('#treeDemos6').hide();
        }
    });

    $(document).click(function(e) {
        if (e.target.id != 'type' && e.target.id != 'treeDemo1') {
            $('#treeDemo1').hide();
            $.fn.zTree.init($("#treeDemo1"), settingtype, zNodes);

        }
    });
    $(document).click(function(e) {
        if (e.target.id != 'searchfl' && e.target.id != 'treeDemo2') {
            $('#treeDemo2').hide();
        }
    });
    $(document).on('click', '#treeDemo li', function(e) {
        e ? e.stopPropagation() : event.cancelBubble = true;
    })
    //            s2
    $(document).on('click', '#treeDemos2 li', function(e) {
        e ? e.stopPropagation() : event.cancelBubble = true;
    })
    //            s3
    $(document).on('click', '#treeDemos3 li', function(e) {
        e ? e.stopPropagation() : event.cancelBubble = true;
    })
    //            s4
    $(document).on('click', '#treeDemos4 li', function(e) {
        e ? e.stopPropagation() : event.cancelBubble = true;
    })
    //            s5
    $(document).on('click', '#treeDemos5 li', function(e) {
        e ? e.stopPropagation() : event.cancelBubble = true;
    })
    //            s6
    $(document).on('click', '#treeDemos6 li', function(e) {
        e ? e.stopPropagation() : event.cancelBubble = true;
    })
    $(document).on('click', '#treeDemo1 li', function(e) {
        e ? e.stopPropagation() : event.cancelBubble = true;
    })
    $(document).on('click', '#treeDemo2 li', function(e) {
        e ? e.stopPropagation() : event.cancelBubble = true;
    })

    $(document).on('focus', '#diode', function(event) {
        console.log('djdd')
        $('#treeDemo').show()

    });
    //        s2
    $(document).on('focus', '#diodes2', function(event) {
        console.log('djdd')
        $('#treeDemos2').show()
        inizTree(diodeUrl,$("#treeDemos2"), settings, zyzz);
        // $.fn.zTree.init($("#treeDemos2"), settings, zyzz);

    });
    //        s3
    $(document).on('focus', '#diodes3', function(event) {
        console.log('djdd');
        $('#treeDemos3').show();
        inizTree(diodeUrl,$("#treeDemos3"), settingsa, zyzz);
        // $.fn.zTree.init($("#treeDemos3"), settingsa, zyzz);

    });
    //        s4
    $(document).on('focus', '#diodes4', function(event) {
        console.log('djdd');
        $('#treeDemos4').show();
        inizTree(diodeUrl,$("#treeDemos4"), settingsb, zyzz);
        // $.fn.zTree.init($("#treeDemos4"), settingsb, zyzz);

    });
    //        s5
    $(document).on('focus', '#diodes5', function(event) {
        console.log('djdd')
        $('#treeDemos5').show()
        inizTree(diodeUrl,$("#treeDemos5"), settingsc, zyzz);
        // $.fn.zTree.init($("#treeDemos5"), settingsc, zyzz);

    });
    //        s6
    $(document).on('focus', '#diodes6', function(event) {
        console.log('djdd')
        $('#treeDemos6').show()

        inizTree("/typeList",$("#treeDemos6"),settingsd,zNodes);

        // $.fn.zTree.init($("#treeDemos6"), settingsd, zNodes);

    });

    $(document).on('focus', '#type', function(event) {
        console.log('djdd')
        $('#treeDemo1').show()

    });
    $(document).on('click', '#searchfl', function() {
        $('#treeDemo2').show();
    })



    //添加体系认证
    var saleslist = ['9001', '14000', '28000', '其他'];

    var salesbox = '';

    function salesfn(type, data) {
        var html = '<div class="salesbox">';
        if (type == 'add') {
            for (var i = 0; i < saleslist.length; i++) {
                html += '<label for="' + saleslist[i] + '"><input type="checkbox" id="' + saleslist[i] + '" value="' + saleslist[i] + '"/>' + saleslist[i] + '</label>'

            }
            html += '<div class="salesbtn">' +
                '<div class="textcenter">' +
                '<button class="layui-btn" type="button" onclick="addsales()">保存</button>' +
                '</div></div></div>';
            return html;
        }
        if (type == 'edit') {

            console.log('获取')
            console.log(data)
            for (var i = 0; i < saleslist.length; i++) {
                var has = false;
                for (var j = 0; j < data.length; j++) {
                    if (saleslist[i] == data[j]) {
                        html += '<label for="' + saleslist[i] + '"><input type="checkbox" checked id="' + saleslist[i] + '" value="' + saleslist[i] + '"/>' + saleslist[i] + '</label>';
                        has = true;
                        break;
                    }


                }
                if (!has) {

                    html += '<label for="' + saleslist[i] + '"><input type="checkbox"  id="' + saleslist[i] + '" value="' + saleslist[i] + '"/>' + saleslist[i] + '</label>'

                }




            }
            html += '<div class="salesbtn">' +
                '<div class="textcenter">' +
                '<button class="layui-btn" type="button" onclick="addsales()">保存</button>' +
                '</div></div></div>';
            return html;
        }

    }
    //点击添加体系认证
    $(document).on('click', '#sales', function() {
        var type = '';
        if ($(this).val() == '') {
            var getval = [];
        } else {
            var getval = $(this).val().split(',');
        }

        console.log(getval.length)
        if (getval.length > 0) {
            type = 'edit';
            var html = '<div class="salesbox"><label for="9001"><input type="checkbox" checked id="9001" value="9001"/>9001</label>' +
                '<label for="14000"><input type="checkbox" checked id="14000" value="14000"/>14000</label>' +
                '<label for="28000"><input type="checkbox" checked id="28000" value="28000"/>28000</label>' +
                '<div class="salesbtn">' +
                '<div class="textcenter">' +
                '<button class="layui-btn" type="button" onclick="addsales()">保存</button>' +
                '</div>' +
                '</div>' +
                '</div>';
        } else {
            type = 'add'
        }

        salesbox = layer.open({
            type: 1,
            title: ['添加体系认证', 'font-size:16px;'],
            area: ['300px', '300px'],
            fixed: false, //不固定
            offset: 't',
            maxmin: true,
            content: salesfn(type, getval),
            success: function(layero, index) {

            }
        });
    })

    function addsales() {
        var val = '';
        if ($('.salesbox input:checkbox:checked').length < 1) {
            alert('请选择一项');
            return;
        }
        $.each($('.salesbox input:checkbox:checked'), function(index) {
            val += $(this).val();
            if (index == $('.salesbox input:checkbox:checked').length - 1) {

            } else {
                val += ','
            }
        })
        $('#sales').val(val);
        layer.close(salesbox);

    }
    //        添加体系认证结束

    //添加地区内容
    //            省市直辖市数据
    var businesslist = [
        '北京市', '上海市', '天津市', '重庆市',
        '黑龙江', '吉林省', '辽宁省', '河北省',
        '河南省', '山西省', '陕西省', '山东省',
        '安徽省', '江西省', '江苏省', '浙江省',
        '湖南省', '湖北省', '贵州省', '四川省',
        '云南省', '甘肃省', '青海省', '福建省',
        '广东省', '台湾省', '海南省', '内蒙古',
        '宁夏  ', '广西  ', '西藏  ', '新疆  ',
        '香港', '澳门'
    ];

    var businessbox = '';

    function businessfn(type, data) {
        var html = '<div class="businessbox">';
        if (type == 'add') {
            for (var i = 0; i < businesslist.length; i++) {
                html += '<label for="' + businesslist[i] + '"><input type="checkbox" id="' + businesslist[i] + '" value="' + businesslist[i] + '"/>' + businesslist[i] + '</label>'

            }
            html += '<div class="businessbtn">' +
                '<div class="textcenter">' +
                '<button class="layui-btn" type="button" onclick="addbusiness()">保存</button>' +
                '</div></div></div>';
            return html;
        }
        if (type == 'edit') {

            console.log('获取')
            console.log(data)
            for (var i = 0; i < businesslist.length; i++) {
                var has = false;
                for (var j = 0; j < data.length; j++) {
                    if (businesslist[i] == data[j]) {
                        html += '<label for="' + businesslist[i] + '"><input type="checkbox" checked id="' + businesslist[i] + '" value="' + businesslist[i] + '"/>' + businesslist[i] + '</label>';
                        has = true;
                        break;
                    }


                }
                if (!has) {

                    html += '<label for="' + businesslist[i] + '"><input type="checkbox"  id="' + businesslist[i] + '" value="' + businesslist[i] + '"/>' + businesslist[i] + '</label>'

                }




            }
            html += '<div class="businessbtn">' +
                '<div class="textcenter">' +
                '<button class="layui-btn" type="button" onclick="addbusiness()">保存</button>' +
                '</div></div></div>';
            return html;
        }

    }
    //点击添业务区域
    $(document).on('click', '#business', function() {
        var type = '';
        if ($(this).val() == '') {
            var getval = [];
        } else {
            var getval = $(this).val().split(',');
        }

        console.log(getval.length)
        if (getval.length > 0) {
            type = 'edit';
            var html = '<div class="businessbox"><label for="9001"><input type="checkbox" checked id="9001" value="9001"/>9001</label>' +
                '<label for="14000"><input type="checkbox" checked id="14000" value="14000"/>14000</label>' +
                '<label for="28000"><input type="checkbox" checked id="28000" value="28000"/>28000</label>' +
                '<div class="businessbtn">' +
                '<div class="textcenter">' +
                '<button class="layui-btn" type="button" onclick="addbusiness()">保存</button>' +
                '</div>' +
                '</div>' +
                '</div>';
        } else {
            type = 'add'
        }

        businessbox = layer.open({
            type: 1,
            title: ['添加业务内容区域', 'font-size:16px;'],
            area: ['800px', '400px'],
            fixed: false, //不固定
            offset: 't',
            maxmin: true,
            content: businessfn(type, getval),
            success: function(layero, index) {

            }
        });
    })

    function addbusiness() {
        var val = '';
        if ($('.businessbox input:checkbox:checked').length < 1) {
            alert('请选择一项');
            return;
        }
        $.each($('.businessbox input:checkbox:checked'), function(index) {
            val += $(this).val();
            if (index == $('.businessbox input:checkbox:checked').length - 1) {

            } else {
                val += ','
            }
        })
        $('#business').val(val);
        layer.close(businessbox);

    }
    //        添加地区结束

    // 打开添加供应商信息
    function openadd() {
        let addhtml = '<div style="padding-top: 20px;"><form class="layui-form"> <!-- 提示：如果你不想用form，你可以换成div等任何一个普通元素 -->' +
            '<h4>（一）供方基本信息</h4>' +
            '<div class="clearfix listitem">' +
            '   <div class="fl">' +
            '       <p>供方名称</p>' +
            '       <div><input type="text" name="" class="layui-input" id="name"></div>' +
            '   </div>' +
            '   <div class="fr">' +
            '       <p>注册资金</p>' +
            '       <div><input type="number" name="" style="display:inline-block;width:48%;margin-right:2%" class="layui-input" id="money">' +
            '<select name="interest" id="province"  style="display:inline-block;width:50%">' +
            '           <option value="0" selected="">欧元</option>' +
            '           <option value="0" selected="">港币</option>' +
            '           <option value="0" selected="">美元</option>' +
            '           <option value="0" selected="">人民币</option>' +

            '       </select>'+
            '</div>' +
            '   </div>' +
            '</div>' +

            '<div class="clearfix listitem">' +
            '   <div class="fl">' +
            '       <p>法人代表</p>' +
            '       <div><input type="text" name="" class="layui-input" id="legal"></div>' +
            '    </div>' +
            '    <div class="fr">' +
            '       <p>企业性质</p>' +
            '       <div><select name="interest" id="nature"  style="display:block;width:100%">' +
            '           <option value="0">外资</option>' +
            '           <option value="1" selected="">合资</option>' +
            '           <option value="2">国企</option>' +
            '           <option value="3">私企</option>' +
            '           <option value="4">集体所有制</option>' +
            '           <option value="5">其他</option>' +
            '       </select></div>' +
            '    </div>' +
            '</div>' +

            '<div class="clearfix listitem">' +
            '   <div class="fl">' +
            '       <p>办公地址</p>' +
            '       <div><input type="text" name="" class="layui-input" id="address"></div>' +
            '   </div>' +
            '   <div class="fr">' +
            '       <p>注册地址</p>' +
            '       <div><select name="interest" id="province"  style="display:inline-block;width:48%">' +
            '           <option value="0" selected="">广东省</option>' +
            '           <option value="1" >江苏省</option>' +
            '           <option value="2">浙江省</option>' +
            '           <option value="3">山东省</option>' +
            '       </select><select name="interest" id="city"  style="display:inline-block;width:48%;margin-left:2%">' +
            '           <option value="0">深圳市</option>' +
            '           <option value="1" selected="">广州市</option>' +
            '           <option value="2">东莞市</option>' +
            '           <option value="3">佛山市</option>' +
            '       </select></div>' +
            '   </div>' +
            '</div>' +

            '<div class="clearfix listitem">' +
            '   <div class="fl">' +
            '       <p>官方网站</p>' +
            '       <div><input type="text" name="" class="layui-input" id="url"></div>' +
            '   </div>' +
            '   <div class="fr">' +
            '       <p>纳税人类型</p>' +
            '       <div><input type="text" name="" class="layui-input" id="nstype"></div>' +
            '   </div>' +
            '</div>' +

            '<div class="clearfix listitem">' +
            '   <div class="fl">' +
            '       <p>供方分类</p>' +
            '       <div class="fllist"><ul id="treeDemo1" style="width:230px;" class="ztree"></ul><input type="text" name="" readonly class="layui-input" id="type"></div>' +
            '   </div>' +
            '   <div class="fr">' +
            '       <p>营业执照起始日期</p>' +
            '       <div> <input type="text" name="date" id="zyzdate" lay-verify="date" placeholder="yyyy-MM-dd" autocomplete="off" class="layui-input"></div>' +
            '   </div>' +
            '</div>' +

            '<div class="clearfix listitem">' +
            '   <div class="fl">' +
            '       <p>营业执照号</p>' +
            '       <div><input type="text" name="" class="layui-input" id="zzh"></div>' +
            '   </div>' +
            '   <div class="fr">' +
            '       <p>主营资质</p>' +
            '       <div class="zzlist"><ul id="treeDemo" style="width:230px;" class="ztree"></ul><input type="text" name="" class="layui-input" id="diode" readonly></div>' +
            '   </div>' +
            '</div>' +

            '<div class="clearfix listitem">' +
            '            <div class="fl">' +
            '                <p>兼营业务资质</p>' +
            //                '       <div class="zzlists" style="width:25%;float:left"><ul id="treeDemos2" style="width:230px;" class="ztree"></ul><input type="text" name="" class="layui-input" id="diode1" readonly></div>' +
            //                '       <div class="zzlists" style="width:25%;float:left"><ul id="treeDemos3" style="width:230px;" class="ztree"></ul><input type="text" name="" class="layui-input" id="diode2" readonly></div>' +
            //                '       <div class="zzlists" style="width:25%;float:left"><ul id="treeDemos4" style="width:230px;" class="ztree"></ul><input type="text" name="" class="layui-input" id="diode3" readonly></div>' +
            //                '       <div class="zzlists" style="width:25%;float:left"><ul id="treeDemos5" style="width:230px;" class="ztree"></ul><input type="text" name="" class="layui-input" id="diode4" readonly></div>' +
            '       <div class="zzlists"><ul id="treeDemos2" style="width:230px;" class="ztree ztrees"></ul>' +
            '<input type="text" name="" class="layui-input" id="diodes2" placeholder="兼营业务资质1" readonly></div>' +
            '       <div class="zzlists"><ul id="treeDemos3" style="width:230px;" class="ztree ztrees"></ul>' +
            '<input type="text" name="" class="layui-input" id="diodes3"  placeholder="兼营业务资质2" readonly></div>' +
            '       <div class="zzlists"><ul id="treeDemos4" style="width:230px;" class="ztree ztrees"></ul>' +
            '<input type="text" name="" class="layui-input" id="diodes4"  placeholder="兼营业务资质3" readonly></div>' +
            '       <div class="zzlists"><ul id="treeDemos5" style="width:230px;" class="ztree ztrees"></ul>' +
            '<input type="text" name="" class="layui-input" id="diodes5"  placeholder="兼营业务资质4" readonly></div>' +

            //                '       <div class="zzlists"><ul id="treeDemos6" style="width:230px;" class="ztree ztrees"></ul>' +
            //                '<input type="text" name="" class="layui-input" id="diodes6"  placeholder="兼营业务资质4" readonly></div>' +

            //                '                <div><input type="text" name="" class="layui-input" id="yyzz"></div>' +
            '            </div>' +
            '            <div class="fr">' +
            '                <p>体系认证</p>' +
            '                <div><input type="text" name="" readonly class="layui-input" id="sales"></div>' +
            '            </div>' +
            '        </div>' +

            '        <div class="clearfix listitem">' +
            '            <div class="fl">' +
            '                <p>产品许可证</p>' +
            '                <div><input type="text" name="" class="layui-input" id="brand"></div>' +
            '            </div>' +
            '            <div class="fr">' +
            '                <p>主营业务范围</p>' +
            '                <div><input type="text" name="" class="layui-input" id="range"></div>' +
            '            </div>' +
            '        </div>' +

            '<br>' +
            '<h4>（二）供方机构信息</h4>' +
            ' <div class="clearfix listitem">' +
            '            <div class="fl">' +
            '                <p>总部</p>' +
            '                <div><input placeholder="请输入内容" type="text" name="" class="layui-input" id="general"></div>' +
            '            </div>' +
            '            <div class="fr">' +
            '                <p>分支机构</p>' +
            '                <div><input type="text" name="" class="layui-input" id="branch"></div>' +
            '   </div>' +
            '</div>' +
            '<br>' +
            '<h4>（三）供方业务状况</h4>' +
            ' <div class="listitem">' +
            '            <div class="">' +
            '                <p>主营业务区域</p>' +
            //                '   <div>' +
            //                '       <div><select name="interest" id="province"  style="display:inline-block;width:48%">' +
            //                '           <option value="0" selected="">广东省</option>' +
            //                '           <option value="1" >江苏省</option>' +
            //                '           <option value="2">浙江省</option>' +
            //                '           <option value="3">山东省</option>' +
            //                '       </select><select name="interest" id="city"  style="display:inline-block;width:48%;margin-left:2%">' +
            //                '           <option value="0">深圳市</option>' +
            //                '           <option value="1" selected="">广州市</option>' +
            //                '           <option value="2">东莞市</option>' +
            //                '           <option value="3">佛山市</option>' +
            //                '       </select></div>' +
            //                '   </div>' +
            '                <div><textarea placeholder="请选择地区" class="layui-textarea" readonly id="business"></textarea></div>' +
            '            </div>' +
            '</div>' +
            ' <div class="listitem">' +
            '            <div class="">' +
            '                <p>加工生产设备</p>' +
            '                <div> <textarea placeholder="请输入内容" class="layui-textarea" id="equipment"></textarea></div>' +
            '            </div>' +
            '</div>' +
            ' <div class="listitem">' +
            '            <div class="">' +
            '                <p>年产能力</p>' +
            '                <div><textarea placeholder="请输入内容" class="layui-textarea" id="apc"></textarea></div>' +
            '            </div>' +
            '</div>' +
            ' <div class="listitem">' +
            '            <div class="">' +
            '                <p>售后服务能力</p>' +
            '                <div><textarea placeholder="请输入内容" class="layui-textarea" id="after"></textarea></div>' +
            '            </div>' +
            '</div>' +
            ' <div class="listitem">' +
            '            <div class="">' +
            '                <p>外协厂家</p>' +
            '                <div><textarea placeholder="请输入内容" class="layui-textarea" id="wxie"></textarea></div>' +
            '            </div>' +
            '</div>' +
            ' <div class="listitem">' +
            '            <div class="">' +
            '                <p>以往业绩</p>' +
            '                <div>' +
            '<div class="general-wrapper msgtable" >'+
            '<div class=" table_type1 table_type2 " >' +
            '<table border="0" cellpadding="0" cellspacing="0" align="left" width="100%">' +
            ' <thead>' +
            ' <tr>' +
            '  <td>项目名称</td>' +
            '  <td>开发商</td>' +
            '  <td>合同内容</td>' +
            '  <td>建筑面积</td>' +
            '  <td>合同金额</td>' +
            '  <td>项目状态: </td>' +
            '  <td>备注</td>' +
            '  </tr>' +
            '  </thead>' +
            '   <tbody id="tabledata">' +
            '  <tr>' +
            '   <td></td>' +
            '   <td></td>' +
            '   <td></td>' +
            '   <td></td>' +
            '   <td></td>' +
            '   <td> <div><select name="interest" id="nature"  style="display:block;width:100%">' +
            '           <option value="0">进行中</option>' +
            '           <option value="1" selected="">已完成</option>' +

            '       </select></div></td>' +
            '   <td></td>' +

            '    </tr>' +
            '    <tr>' +
            '    <td></td>' +
            '    <td></td>' +
            '    <td></td>' +
            '    <td></td>' +
            '    <td></td>' +
            '   <td> <div><select name="interest" id="nature"  style="display:block;width:100%">' +
            '           <option value="0">进行中</option>' +
            '           <option value="1" selected="">已完成</option>' +

            '       </select></div></td>' +
            '    <td></td>' +

            '    </tr>' +
            '   </tbody>' +
            '    </table>' +
            '    </div>' +
            '    </div>' +

            '' +
            '</div>' +
            '            </div>' +
            '</div>' +

            '<br>' +
            '<h4>（四）供方联系方式</h4>' +


            '        <div class="clearfix listitem">' +
            '            <div class="fl">' +
            '                <p>联系人</p>' +
            '                <div><input type="text" name="" class="layui-input" id="linkman"></div>' +
            '            </div>' +
            '            <div class="fr center">' +
            '                <p>联系固话</p>' +
            '                <div><input type="text" name="" class="layui-input" id="phone"></div>' +
            '            </div>' +

            '        </div>' +

            '        <div class="clearfix listitem">' +
            '            <div class="fl">' +
            '                <p>手机</p>' +
            '                <div><input type="text" name="" class="layui-input" id="tel"></div>' +
            '            </div>' +
            '            <div class="fr">' +
            '                <p>邮箱</p>' +
            '                <div><input type="text" name="" class="layui-input" id="email"></div>' +
            '            </div>' +
            '        </div>' +
            '        <div class="clearfix listitem">' +
            '            <div class="">' +
            '                <p>附件清单</p>' +
            '                <p style="margin:10px 0;">请上传正确的文件格式</p>' +
            '                <div style="float:left;margin-right:10px;"><button type="button" class="layui-btn" id="upfile1"><i class="layui-icon">&#xe67c;</i>执照上传</button></div>' +
            '                <div style="float:left;margin-right:10px;"><button type="button" class="layui-btn" id="upfile1"><i class="layui-icon">&#xe67c;</i>资格证书上传</button></div>' +
            '                <div style="float:left;margin-right:10px;"><button type="button" class="layui-btn" id="upfile1"><i class="layui-icon">&#xe67c;</i>安全生产许可证上传</button></div>' +
            '                <div style="float:left;margin-right:10px;"><button type="button" class="layui-btn" id="upfile1"><i class="layui-icon">&#xe67c;</i>其他资质上传</button></div>' +
            '            </div>' +


            '        </div>' +
            '        <div class="textcenter">' +
            '            <button class="layui-btn" type="button" onclick="getmsg()">保存</button>' +
            '            <button class="layui-btn canclemodel" type="button" onclick="cancleall()">取消</button>' +
            '        </div>' +
            '    </form></div>';
        layer.open({
            type: 1,
            title: ['新增供应商信息', 'font-size:16px;'],
            area: ['80%', '100%'],
            fixed: false, //不固定
            offset: 't',
            maxmin: true,
            content: addhtml,
            success: function(layero, index) {
                // $.fn.zTree.init($("#treeDemo"), setting, zyzz);
                // $.fn.zTree.init($("#treeDemo2"), setting, zyzz);
                // $.fn.zTree.init($("#treeDemo1"), settingtype, zNodes);

                $('#type').val(getFilePath(treeNodee));

                initAddHtmlNode();

                layui.use(['form', 'layedit', 'laydate'], function() {
                    var laydate = layui.laydate;
                    laydate.render({
                        elem: '#zyzdate'
                    });
                })
            }
        });
    }

    function cancleall() {
        layer.closeAll()
    }
    //        查询按钮
    function searchbox() {
        let addserarchThml = '<div class="clearfix main">' +
            '<div class="fl nav">' +
            '</div>' +
            '<div class="fr">' +
            '<div class="top clearfix">' +
            '<span class="fl title" id="searchtit"> 请选择供方分类</span><i class="layui-icon-right layui-icon fl"></i>' +
            '' +
            '</div>' +
            '<div class="clearfix type2"><span class="fl typespan">分类:</span>' +
            '<div class="fl searchfllist">' +
            '<input type="text" name="" class="layui-input" id="searchfl" readonly placeholder="请选择供方分类">' +
            '<ul id="treeDemo2" style="width:230px;" class="ztree"></ul>' +
            '</div>' +
            '</div>' +

            '<div class="clearfix " style="padding: 5px 20px;">' +
            '<span class="fl typespan">名称：</span>' +
            '<div class="fl"><input type="text" class="layui-input" id="searchname"></div>' +
            '</div>' +
            '<div class="clearfix" style="padding: 5px 20px;">' +
            '<span class="fl typespan">品牌：</span>' +
            '<div class="fl"><input type="text" class="layui-input" id="nametype"></div>' +
            '</div>' +
            '<div class="clearfix" style="padding: 5px 20px;">' +
            '<span class="fl typespan">联系人：</span>' +
            '<div class="fl"><input type="text" class="layui-input" id="searchlinkman"></div>' +
            '</div>' +
            '<div class="clearfix" style="padding: 5px 20px;">' +
            '<span class="fl typespan">电话：</span>' +
            '<div class="fl"><input type="text" class="layui-input" id="searchtel"></div>' +
            '</div>' +
            '<button type="button" class="layui-btn layui-btn" style="height: 30px;line-height:30px;position: relative;top: -1px; margin-left:20px;margin-top:30px;" id="closemask">模糊查询</button>'+
            '</div>' +
            '</div>'
        layer.open({
            type: 1,
            title: ['查询', 'font-size:16px;'],
            area: ['60%', '85%'],
            fixed: false, //不固定
            maxmin: true,
            content: addserarchThml,
            success: function() {
                inizTree("/typeList",$("#treeDemo2"),searchsetting,zNodes);
                // $.fn.zTree.init($("#treeDemo2"), searchsetting, zNodes);
            }
        });
        $('#closemask').click(function() {
            search()
        });



        function getVal(controlID, controltype) {
            var objValue = '';
            switch (controltype) {
                case 'text': //文本输入框
                    objValue = $.trim($('#' + controlID + '').val()); //取值除去所有的空格
                    break;
                case 'radio': //单选框
                    objValue = $("input[name='" + controlID + "']:checked").val();
                    break;
                case 'select': //下拉列表
                    objValue = $("#" + controlID + "").val();
                    break;
                case 'checkbox': //复选框
                    $("input[name='" + controlID + "']:checked").each(function() {
                        objValue += $(this).val() + ",";
                    });
                    break;
                default:
                    break;
            }
            return objValue;
        }
        $('#firsttype').change(function() {
            var world = getVal('firsttype', 'select');
            $('.top .title').html(world)
        });
        $('#twotype').change(function() {
            var world = getVal('twotype', 'select');
            $('#searchname').val(world)
        })
        // 更多选项展开收齐
        $('.addmore').click(function() {
            $('.moredata').slideToggle();
        });

        function search() {

            var data = {};
            if($("#searchfl").val().trim().length!=0){
                data["type"]=$("#searchfl").val().trim();
            }
            if($("#searchname").val().trim().length!=0){
                data["name"]=$("#searchname").val().trim();
            }
            if($("#searchtel").val().trim().length!=0){
                data["tel"]=$("#searchtel").val().trim();
            }
            if($("#searchlinkman").val().trim().length!=0){
                data["linkman"]=$("#searchlinkman").val().trim();
            }
            data["size"]=20;
            data["pageNum"]=1;

            iniLaypage(JSON.stringify(data));

            layer.closeAll(); // 关闭layui的弹窗


        };
        // 在本地获取所有的商家信息
        function getdata(data) {
            if (!data) {
                data = JSON.parse(localStorage.getItem('datalist'));
            }
            if (data == null || data.length == 0) {
                $('#nodata').html('没有数据');
                data = []
            }
            var html = '';
            data.map(function(item, idx) {
                html += '<tr>' +
                    '<td>' + parseInt(idx + 1) + '</td>' +
                    '<td onclick="chousedata(event,' + idx + ')" style="cursor:pointer;">' + item.name + '</td>' +
                    '<td>' + item.type + '</td>' +
                    '<td>' + item.diode + '</td>' +
                    '<td>' + item.sales + '</td>' +
                    '<td>' + item.business + '</td>' +
                    '</tr>'
            });
            allhtml.html(html);
            layer.closeAll()
        }

        // 跳转到表格信息
        function suppliermsg(obj) {
            // console.log($(obj).name)
            parent.$("#nowpage").attr("src", 'pages/supplierinformation.html')
        }
        $('.nav li').click(function() {
            $(this).addClass('active').siblings().removeClass('active');
            var word = $(this).text();
            $('.title').html(word)
        });
        // 是否有资质
        $('.zizhi span,.friend span').click(function() {
            $(this).addClass('hasd').siblings().removeClass('hasd');
        });
        // 点击左侧分页
        $('.page-left').click(function() {
            var num = parseInt($('.pagenum').html());
            var numall = parseInt($('.pageAll').html());
            if (num >= 2) {
                num--;
            }
            if (num > 1 && num < numall) {
                $('.page-left').removeClass('page-end');
                $('.page-right').removeClass('page-end')
            }
            if (num == 1) {
                $('.page-left').addClass('page-end')
            }
            $('.pagenum').html(num)
        });
        // 点击右侧分页
        $('.page-right').click(function() {
            var num = parseInt($('.pagenum').html());
            var numall = parseInt($('.pageAll').html());
            if (num <= (numall - 1)) {
                num++;
            }
            if (num > 1 && num < numall) {
                $('.page-left').removeClass('page-end');
                $('.page-right').removeClass('page-end')
            }
            if (num == numall) {
                $('.page-right').addClass('page-end')
            }
            $(".pagenum").html(num)
        });
        $('.condition span').click(function() {
            let textval = $(this).text();
            $('.serchipt').val(textval);
        });
    }
    // 跳转到表格信息
    function suppliermsg(obj) {
        // console.log($(obj).name)
        parent.$("#nowpage").attr("src", 'pages/supplierinformation.html')
    }

    //华丽的分界线-------------------------------------------------------------
    //华丽的分界线-------------------------------------------------------------
    //华丽的分界线-------------------------------------------------------------
    //华丽的分界线-------------------------------------------------------------

    var treeNodee;

    /**
     * post方式ajax
     * @param data post的Json数据
     * @param url 发送路径
     * @param fun 成功的回调函数
     * @param isasync 是否异步发送
     */
    function postJsonData(data,url,fun,isasync){

        if(isasync==undefined){
            isasync = true;
        }
        $.ajax({
            url:url,
            data:data,
            dataType:"json",
            contentType:"application/json",
            type:"post",
            success:fun,
            async:isasync
        });

    }

    /**
     * get方式ajax
     * @param url get的Json数据
     * @param fun 成功的回调函数
     * @param isasync 是否异步发送
     */
    function getJsonData(url,fun,isasync){
        if(isasync==undefined){
            isasync = true;
        }
        $.ajax({
            url:url,
            dataType:"json",
            contentType:"application/json",
            type:"get",
            success:fun,
            async:isasync
        });

    }
    /**
     * 加载树形结构
     * @param url 树形结构数据请求路径
     * @param tree 树形结构元素
     * @param setting 设置集
     * @param treedata 树形结构数据的存放全局变量
     */
    function inizTree(url,tree,setting,treedata){

        var fun = function(data){

            if(data.code==200){
                treedata=data.data;
                $.fn.zTree.init(tree, setting, data.data);
            }else{
                layer.msg(data.msg,function(){
                });
            }

        }

        getJsonData(url,fun)

    }

    /**
     * 初始化分页导航条
     * @param jsonData 分页数据所满足的条件
     */
    function iniLaypage(jsonData){

        var dataCount = 0;
        postJsonData(jsonData,"/customerCount",function(data){
            dataCount = data.data[0];
        },false);

        layui.use('laypage', function() {
            var laypage = layui.laypage;
            //执行一个laypage实例
            laypage.render({
                limit: 20, // 每页条数
                elem: 'pages', //注意，这里的 test1 是 ID，不用加 # 号,
                count: dataCount, //数据总数，从服务端得到
                jump:function(obj,first){

                    //obj包含了当前分页的所有参数，比如：
                    console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
                    console.log(obj.limit); //得到每页显示的条数
                    var json = JSON.parse(jsonData);
                    json.size=obj.limit;
                    json.pageNum=obj.curr;
                    jsonData = JSON.stringify(json);
                    postJsonData(jsonData,"/customerPages",function(data){
                        localStorage.removeItem("datalist");
                        localStorage.setItem('datalist', JSON.stringify(data.data));
                        getdatas();
                    });
                    // alert(obj.curr);
                    //首次不执行
                    if(!first){
                        //do something
                    }

                }
            });
        });

    }

    /**
     * 更新客商信息
     * @param msg var msg = localStorage.getItem('datalist');
     * @param data 更新的客商的信息
     */
    function updateKeshang(msg,data){

        postJsonData(JSON.stringify(data),"/updateCustomer",function(d){

            if(d.code==200){
                msg = JSON.parse(msg);
                msg[type] = d.data[0];
                localStorage.setItem('datalist', JSON.stringify(msg));
                layer.msg('修改成功');
                getdatas();
                layer.closeAll(); // 关闭layui的弹窗
            }else{
                layer.msg(d.msg);
            }

        });

    }

    /**
     * 保存客商信息
     * @param msg var msg = localStorage.getItem('datalist');
     * @param data 保存的客商的信息
     */
    function saveKeshang(msg,data){

        postJsonData(JSON.stringify(data),"/saveCustomer",function(d){

            if(d.code==200){
                if(msg==null){

                    var datalist = [];
                    datalist.push(data);
                    localStorage.setItem('datalist', JSON.stringify(datalist));

                }else{
                    msg = JSON.parse(msg);
                    msg.unshift(data);
                    localStorage.setItem('datalist', JSON.stringify(msg));
                }
                layer.msg('添加成功');
                getdatas();
                layer.closeAll(); // 关闭layui的弹窗
            }else{
                layer.msg(d.msg);
            }

        });

    }

    /**
     * 加载新增修改客商信息时的供应商分类等
     */
    function initAddHtmlNode(){
        // $.fn.zTree.init($("#treeDemo"), setting, zyzz);
        // $.fn.zTree.init($("#treeDemo1"), settingtype, zNodes);
        inizTree("/diodeList",$("#treeDemo"),setting,zyzz);
        inizTree("/typeList",$("#treeDemo1"),settingtype,zNodes);
        fileUploadInit('#upfile1',
            '#startupfile',
            '/uploadHome',
            {"path":"test/test1"},
            function(res){
                console.log(res);
            });

    }


    /**
     * 为元素添加非自动的上传
     * @param elemData 上传区域
     * @param bindActionData 绑定按钮
     * @param urlData 上传地址
     * @param dataData 服务端保存相对路径
     * @param fun 执行后的回调函数
     */
    function fileUploadInit(elemData,bindActionData,urlData,dataData,fun){

        //文件上传
        layui.use('upload', function() {
            var $ = layui.jquery
                , upload = layui.upload;

            //选完文件后不自动上传
            upload.render({
                elem: elemData
                ,url: urlData
                ,data:dataData
                ,auto: false
                ,multiple: true,
                accept: 'file'
                ,bindAction: bindActionData
                ,done: fun
            });

        });

    }

    getdatas()

</script>
</body>
<style>
    #layui-layer1 .layui-layer-content{
        padding-left: 20px;
        padding-right: 20px;
        box-sizing: border-box;
    }
    #layui-layer1  .listitem>.fl p{
        margin-bottom: 10px;
    }
    #layui-layer1  .listitem>.fr p{
        margin-bottom: 10px;
    }
</style>
</html>