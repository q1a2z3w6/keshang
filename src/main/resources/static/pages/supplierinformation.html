<!doctype html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title></title>
    <link rel="stylesheet" href="../lib/layui/css/layui.css">
    <script src="../lib/layui/layui.js"></script>
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/supplierinformation.css">
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>
    <div class="header">
        <div class="logo">
            <img src="../images/logo.jpg" alt="">
        </div>
            <div class="banner">
                <img class="logo-icon" src="../images/logo-icon.jpg" alt="">
                <ul class="layui-nav layui-bg-cyan">
                    <li class="layui-nav-item">
                        <a href="javascript:;">供应商管理</a>
                        <dl class="layui-nav-child">
                            <dd><a href="home.html">供应商维护</a></dd>
                            <dd><a href="">供应商审核</a></dd>
                        </dl>
                    </li>
                    <li class="layui-nav-item">
                        <a href="javascript:;">系统设置</a>
                        <dl class="layui-nav-child">
                            <dd><a href="">供应商类别</a></dd>
                            <dd><a href="">发布消息</a></dd>
                            <dd><a href="">发布招商公告</a></dd>
                        </dl>
                    </li>
                    <li class="layui-nav-item">
                        <a href="javascript:;">个人中心</a>
                        <dl class="layui-nav-child">
                            <dd><a href="">基本信息</a></dd>
                            <dd><a href="">密码修改</a></dd>
                        </dl>
                    </li>
                </ul>
            </div>
            <div>
                <div class="com-crumb">
                    <i class="layui-icon">&#xe68e;</i>
                    <span class="">
                <a href="/">首页</a><span class="fg">/</span><a><cite>导航元素</cite></a>
                    </span>
                </div>
            </div>
        </div>
        <div class="mainsup">
            <div class="">
                <!--上边部分-公司信息-->
                    <div class="supeliTop">

                        <div class="supeliTopL">
                            <!--执照-->
                            <div class="zhizhao">
                                <img src="../images/zhizhao.png">
                            </div>
                        </div>
                        <div class="supeliTopM">
                            <!--执照-->
                            <div class="">
                                <p class="companyName">北京特佳圣地地板有限公司</p>
                                <div class="conpanyAddress">
                                    <p>网址:<a href="">www.jhggj.com</a></p>
                                    <p>地址:xxxxxxxx</p>
                                    <p>电话:1223342434</p>
                                </div>
                            </div>
                        </div>
                        <div class="supeliTopR">
                            <a href="#" onclick="supplierpage(event)">基本信息表</a>
                            <a href="">信息分享</a>
                        </div>
                    </div>
                <!--下边部分-评估合作信息-->
                    <div class="supeliBottom">
                        <div class="supliTit">
                            <div class="v-line"></div>
                                <span>后评估</span>
                        </div>
                        <div class=" pinggu">
                            <div class="general-wrapper">
                                <span class="general general1 mar20">评估状况：<br>未评估</span>
                                <span class="general general3 mar20">评估表录入
                                <span class="slide">
                                    <div class="fr pingyou"  >
                                        <input type="text" id="searchname" name="title" placeholder="请输入优、良、中、差" autocomplete="off" class="layui-input" style="width: 200px;display: inline-block;">
                                        <button type="button" class="layui-btn layui-btn sure" >确定</button>
                                    </div>
                                    <!--<a href="table1.html" target="blank">供应商后评估表（材料及设备供应） </a>-->
                                    <!--<a href="table2.html" target="blank">供应商后评估表（工程监理） </a>-->
                                    <!--<a href="table3.html" target="blank">供应商后评估表（前期顾问） </a>-->
                                    <!--<a href="table4.html" target="blank">供应商后评估表（设计） </a>-->
                                    <!--<a href="table5.html" target="blank">供应商后评估表（造价咨询） </a>-->
                                    <!--<a href="table6.html" target="blank">供应商后评估表（专业分包） </a>-->
                                    <!--<a href="table7.html" target="blank">供应商后评估表（总承包）</a>-->
                                </span>
                                </span>
                                <span class="general general4 mar20"><a href=""  style="color: #ffff">评估表上传</a></span>
                                <span class="general general2"><a href="table1.html" target="blank">评估表查看</a></span>

                            </div>
                        </div>

                        <div class="supliTit">
                            <div class="v-line"></div>
                            <span>以往合作的项目</span>
                        </div>
                        <div>
                            <div class="general-wrapper">
                                <!--<span class="general">价格库查看</span>-->
                                <!--<textarea></textarea>-->
                                <div class="general-wrapper msgtable" >
                                    <div class=" table_type1  table_type2" style="margin-left: 34px">
                                        <table border="0" cellpadding="0" cellspacing="0" align="left" width="100%">
                                            <thead>
                                            <tr class="tabh">
                                                <td style="width: 50px">序号</td>
                                                <td>合作项目名称</td>
                                                <td>项目状态</td>
                                                <td>备注</td>
                                            </tr>
                                            </thead>
                                            <tbody id="tabledata">



                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                            </div>

                        </div>
                    </div>
            </div>
        </div>
            <script src="../lib/layui/layui.all.js"></script>
            <script>

                //转换项目状态
                function getState(val){

                    switch (val) {
                        case "0":
                            return "进行中";
                        case "1":
                            return "已完成";
                        default:
                            return "未定义";
                    }

                }

                //当前记录在localStorage中数组的序号
                var idx = localStorage.getItem("idx");
                //当前记录
                var nowdata = JSON.parse(localStorage.getItem("datalist"))[idx];

                //加载数据
                //根据Id查询以往合作项目的URL
                var ywyjUrl ="/info/ywyj/"+nowdata.id;
                $(".companyName").html(nowdata.name);
                $(".conpanyAddress p a").html(nowdata.url);
                $($(".conpanyAddress p")[1]).html("地址:"+nowdata.address);
                $($(".conpanyAddress p")[2]).html("电话:"+nowdata.tel);
                getJsonData(ywyjUrl,function(data){

                    var items = data.data;
                    var html = [];
                    for(var i=0;i<items.length;i++){
                        html.push('<tr>');
                        html.push('<td style="width: 50px">'+(i+1)+'</td>')
                        html.push('<td>'+items[i].itemName+'</td>');
                        html.push('<td>'+getState(items[i].state)+'</td>');
                        if(items[i].descp==undefined){
                            html.push('<td></td>');
                        }else{
                            html.push('<td>'+items[i].descp+'</td>');
                        }
                        html.push('</tr>');
                    }
                    $("#tabledata").html(html.join());

                });


            // 跳转到供应商官网信息编辑
            function supplierpage(event) {
                event.stopPropagation();
                // parent.$("#nowpage").attr("src",'pages/supplierpage.html');
                window.location.href = '../pages/supplierpage.html'
            }

            function seeform() {
                parent.$("#nowpage").attr("src", 'pages/seepage.html')
            }
            $('.general3 ').click(function(){
                $(this).children('.slide').stop()
                $(this).children('.slide').slideDown(200)
            })
                $('.sure').click(function () {
                    $(this).parent().slideUp()
                })

                /**
                 * post方式ajax
                 * @param data post的Json数据
                 * @param url 发送路径
                 * @param fun 成功的回调函数
                 * @param isasync 是否异步发送
                 */
                function postJsonData(data, url, fun, isasync) {

                    if (isasync == undefined) {
                        isasync = true;
                    }
                    $.ajax({
                        url: url,
                        data: data,
                        dataType: "json",
                        contentType: "application/json",
                        type: "post",
                        success: fun,
                        async: isasync
                    });

                }

                /**
                 * get方式ajax
                 * @param url get的Json数据
                 * @param fun 成功的回调函数
                 * @param isasync 是否异步发送
                 */
                function getJsonData(url, fun, isasync) {
                    if (isasync == undefined) {
                        isasync = true;
                    }
                    $.ajax({
                        url: url,
                        dataType: "json",
                        contentType: "application/json",
                        type: "get",
                        success: fun,
                        async: isasync
                    });

                }
            </script>
</body>

</html>